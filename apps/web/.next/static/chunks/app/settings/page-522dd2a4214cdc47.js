(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{9619:function(e,s,t){Promise.resolve().then(t.bind(t,4175))},4175:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var a=t(7573),r=t(7653),n=t(7930),l=t(1988),d=t(5969),i=t(2389);let o=(0,i.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),c=(0,i.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),m=(0,i.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var u=t(5015);let x=(0,i.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var p=t(5721);let h=(0,i.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),b=(0,i.Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),g=(0,i.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),y=(0,i.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),f=(0,i.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),j=(0,i.Z)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),v=(0,i.Z)("ServerCog",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m15.7 13.4-.9-.3",key:"1jwmzr"}],["path",{d:"m9.2 10.9-.9-.3",key:"qapnim"}],["path",{d:"m10.6 15.7.3-.9",key:"quwk0k"}],["path",{d:"m13.6 15.7-.4-1",key:"cb9xp7"}],["path",{d:"m10.8 9.3-.4-1",key:"1uaiz5"}],["path",{d:"m8.3 13.6 1-.4",key:"s6srou"}],["path",{d:"m14.7 10.8 1-.4",key:"4d31cq"}],["path",{d:"m13.4 8.3-.3.9",key:"1bm987"}]]),N=(0,i.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),k=(0,i.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var w=t(4115),C=t(1695),S=t(2628),M=t(466),A=t(5118),R=t(3638),E=t(1799),F=t(327),z=t(7785),q=t(3735),D=t(5036),L=t(9147);let I={companyName:"",businessEmail:"",businessPhone:"",taxRate:6,currency:"MYR",businessHours:{start:"09:00",end:"18:00",timezone:"Asia/Kuala_Lumpur"},terms:""},W={businessNumber:"",sessionName:"primary",dailyLimit:150,randomDelayMin:30,randomDelayMax:60,respectBusinessHours:!0,optOutKeywords:["STOP","UNSUBSCRIBE"]},Z={provider:"openai",apiKey:"",baseUrl:"",model:"gpt-4o-mini",temperature:.2,maxTokens:512},H={manualEnabled:!0,includeUploads:!0,retentionDays:30,schedule:"02:00",notifyEmail:""};function B(){var e;let s=(0,R.p)(),{user:t,status:i,loading:B}=(0,E.a)(),O=(0,C.useRouter)(),Q=(0,F.A)(null==t?void 0:t.role,["ADMIN","MANAGER"]),U=(0,n.NL)(),[P,T]=(0,r.useState)(I),[K,_]=(0,r.useState)(W),[J,G]=(0,r.useState)(Z),[V,Y]=(0,r.useState)(H),[X,$]=(0,r.useState)("STOP, UNSUBSCRIBE"),[ee,es]=(0,r.useState)(null),[et,ea]=(0,r.useState)("general"),[er,en]=(0,r.useState)(!1),{status:el,loading:ed,startSession:ei,reset:eo,debugStatusJson:ec}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null),[d,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),c=(0,r.useCallback)(async()=>{try{let t=await (0,D.ML)(),a=JSON.stringify(t);if(o.current!==a){var e;console.log("[WhatsApp] status changed",{status:t.status,hasQR:t.hasQR,error:null!==(e=t.lastError)&&void 0!==e?e:"none"}),o.current=a}s(t),l(JSON.stringify(t,null,2))}catch(t){console.error("[WhatsApp][session] status error",t);let e={status:"error",qrImage:null,hasQR:!1,lastError:(null==t?void 0:t.message)||"Failed to fetch WhatsApp status"};o.current=JSON.stringify(e),s(e),l(JSON.stringify(e,null,2))}},[]),m=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((null==e?void 0:e.status)!=="connecting"&&(null==e?void 0:e.status)!=="connected"&&(null==e?void 0:e.status)!=="qr_ready"){a(!0),i(!0);try{await (0,D.wi)(t),await c()}catch(t){console.error("[WhatsApp][session] init error",t);let e={status:"error",qrImage:null,hasQR:!1,lastError:(null==t?void 0:t.message)||"Failed to start WhatsApp session"};s(e),l(JSON.stringify(e,null,2))}finally{a(!1),i(!1)}}},[c,null==e?void 0:e.status]),u=(0,r.useCallback)(async()=>{a(!0);try{await (0,D.BX)();let e={status:"disconnected",qrImage:null,hasQR:!1,lastError:null};s(e),l(JSON.stringify(e,null,2))}catch(t){console.error("[WhatsApp][session] reset error",t);let e={status:"error",qrImage:null,hasQR:!1,lastError:(null==t?void 0:t.message)||"Failed to reset WhatsApp session"};s(e),l(JSON.stringify(e,null,2))}finally{a(!1)}},[c]);return(0,r.useEffect)(()=>{c()},[c]),(0,r.useEffect)(()=>{if(e&&("connecting"===e.status||"qr_ready"===e.status)){let e=setInterval(()=>{c()},3e3);return()=>clearInterval(e)}},[e,c]),{status:e,loading:t,startSession:m,reset:u,refresh:c,debugStatusJson:n,isConnecting:d}}(),em=(0,l.a)({queryKey:["settings"],queryFn:async()=>(0,A.R1)("/api/settings"),enabled:"authenticated"===i});(0,r.useEffect)(()=>{em.data&&(T(em.data.general),_(em.data.whatsapp),G(em.data.ai),Y(em.data.backup),$(em.data.whatsapp.optOutKeywords.join(", ")))},[em.data]);let eu=(0,d.D)({mutationFn:async e=>{let{key:s,value:t}=e;return await (0,A.pE)("/api/settings/".concat(s),t),{key:s,value:t}},onSuccess:e=>{let{key:t,value:a}=e;U.setQueryData(["settings"],e=>e?{...e,[t]:a}:e),s.success("Settings saved")},onError:e=>{s.error((null==e?void 0:e.message)||"Failed to save settings")},onSettled:()=>es(null)}),ex=(0,l.a)({queryKey:["backups"],queryFn:async()=>(0,A.R1)("/api/backups"),enabled:Q&&"authenticated"===i,refetchInterval:6e4}),ep=(0,d.D)({mutationFn:async()=>(0,A.sg)("/api/backups"),onSuccess:e=>{s.success("Backup created (".concat((e.size/1048576).toFixed(1)," MB)")),U.invalidateQueries({queryKey:["backups"]})},onError:e=>s.error((null==e?void 0:e.message)||"Failed to create backup")}),eh=(0,d.D)({mutationFn:async e=>(0,A.sg)("/api/backups/".concat(encodeURIComponent(e),"/restore")),onSuccess:e=>{s.success("Backup extracted to "+((null==e?void 0:e.extractedTo)||"restore folder"))},onError:e=>s.error((null==e?void 0:e.message)||"Restore failed")}),eb=e=>{if(!Q){s.error("You need admin or manager access to edit settings");return}es(e.key),eu.mutate(e)},eg=(0,r.useMemo)(()=>{let e=X.split(",").map(e=>e.trim()).filter(Boolean);return{...K,optOutKeywords:e.length?e:W.optOutKeywords}},[X,K]),ey=(0,r.useMemo)(()=>{let e=(null==el?void 0:el.status)||"disconnected";return"connected"===e?{label:"Connected",className:"bg-emerald-500/15 text-emerald-200 border-emerald-500/50"}:"qr_ready"===e||"connecting"===e&&(null==el?void 0:el.hasQR)?{label:"Scan QR",className:"bg-amber-500/15 text-amber-200 border-amber-500/50"}:"connecting"===e?{label:"Connecting...",className:"bg-sky-500/15 text-sky-100 border-sky-500/50"}:"error"===e?{label:"Error",className:"bg-rose-500/15 text-rose-200 border-rose-500/60"}:{label:"Disconnected",className:"bg-slate-800/60 text-slate-200 border-slate-600/60"}},[null==el?void 0:el.status]),ef=null!==(e=null==el?void 0:el.status)&&void 0!==e?e:"disconnected",ej=(0,r.useMemo)(()=>"qr_ready"===ef||"connecting"===ef&&(null==el?void 0:el.hasQR)?"Scan the QR to link your device.":"connected"===ef?"Connected. Messages will sync to the control room.":"connecting"===ef?"Connecting to WhatsApp... please wait.":"error"===ef?"Something went wrong. Start a new session or reset.":"Start the session to generate a QR code.",[ef,null==el?void 0:el.hasQR]),ev=(0,r.useMemo)(()=>"connected"===ef?3:"qr_ready"===ef||"connecting"===ef&&(null==el?void 0:el.hasQR)?2:1,[ef]),eN=(0,r.useMemo)(()=>{let e=(null==el?void 0:el.lastError)||"";return e.includes("Backend API server is not running")?"The backend API is offline. Please start the API server on port 4000 and try again.":e||null},[null==el?void 0:el.lastError]),ek=(0,r.useMemo)(()=>[{id:"start",label:"Start Session"},{id:"scan",label:"Scan QR"},{id:"connected",label:"Connected"}],[]);return"authenticating"===i||B?(0,a.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-200",children:"Checking your session..."}):"unauthenticated"===i?(0,a.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg space-y-4 rounded-xl border border-slate-800 bg-slate-950/70 p-6 text-center shadow-lg shadow-black/30",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Access required"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Youâ€™re not signed in"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Sign in to manage your WhatsApp and application settings."}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(M.z,{onClick:()=>O.push("/login"),className:"mt-2",children:"Go to Login"})})]})}):"error"===i?(0,a.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg space-y-3 rounded-xl border border-rose-500/40 bg-rose-500/10 p-6 text-center shadow-lg shadow-rose-900/30",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-rose-100",children:"Session error"}),(0,a.jsx)("p",{className:"text-sm text-rose-50/80",children:"Please login again to continue."}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(M.z,{variant:"outline",onClick:()=>O.push("/login"),children:"Go to Login"})})]})}):(0,a.jsx)(S.Z,{redirectOnFail:!1,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("section",{className:"rounded-xl border bg-card/80 px-6 py-5 shadow-sm backdrop-blur",children:[(0,a.jsx)(q.SectionHeader,{icon:(0,a.jsx)(o,{className:"h-4 w-4"}),overline:"Settings",title:"Application Settings",description:"Manage business identity, WhatsApp guardrails, AI preferences, and backup routines.",actions:(0,a.jsx)(z.s,{items:[{id:"general",label:"General"},{id:"whatsapp",label:"WhatsApp"},{id:"ai",label:"AI & Automation"},{id:"backup",label:"Backup"}],value:et,onValueChange:e=>ea(e)})}),Q?null:(0,a.jsx)("div",{className:"mt-4 rounded-md border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-xs text-amber-100",children:"You are in read-only mode. Contact an administrator to update settings."})]}),em.isLoading?(0,a.jsx)("div",{className:"rounded-xl border bg-card/80 px-4 py-6 text-sm text-muted-foreground backdrop-blur",children:"Loading settings..."}):em.isError?(0,a.jsx)("div",{className:"rounded-xl border bg-card/80 px-4 py-6 text-sm text-red-500 backdrop-blur",children:"Failed to load settings"}):(0,a.jsxs)("div",{className:"space-y-6",children:["general"===et?(0,a.jsxs)("section",{className:"rounded-xl border bg-card/80 p-6 shadow-sm backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"General"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business profile"})]}),(0,a.jsx)(c,{className:"h-5 w-5 text-primary"})]}),(0,a.jsxs)("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:e=>{e.preventDefault(),eb({key:"general",value:P})},children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"companyName",children:"Company name"}),(0,a.jsx)("input",{id:"companyName",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.companyName,onChange:e=>T(s=>({...s,companyName:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"businessEmail",children:"Billing email"}),(0,a.jsx)("input",{id:"businessEmail",type:"email",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.businessEmail,onChange:e=>T(s=>({...s,businessEmail:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"businessPhone",children:"Hotline / WhatsApp number"}),(0,a.jsx)("input",{id:"businessPhone",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.businessPhone,onChange:e=>T(s=>({...s,businessPhone:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"currency",children:"Currency code"}),(0,a.jsx)("input",{id:"currency",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm uppercase",value:P.currency,onChange:e=>T(s=>({...s,currency:e.target.value.toUpperCase()})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"taxRate",children:"Tax rate (%)"}),(0,a.jsx)("input",{id:"taxRate",type:"number",min:0,max:100,step:.1,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.taxRate,onChange:e=>T(s=>({...s,taxRate:Number(e.target.value)})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Business hours"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"time",className:"flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.businessHours.start,onChange:e=>T(s=>({...s,businessHours:{...s.businessHours,start:e.target.value}})),disabled:!Q}),(0,a.jsx)("input",{type:"time",className:"flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.businessHours.end,onChange:e=>T(s=>({...s,businessHours:{...s.businessHours,end:e.target.value}})),disabled:!Q})]}),(0,a.jsx)("input",{className:"mt-2 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.businessHours.timezone,onChange:e=>T(s=>({...s,businessHours:{...s.businessHours,timezone:e.target.value}})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"terms",children:"Terms & conditions (shown on invoices & WhatsApp quotes)"}),(0,a.jsx)("textarea",{id:"terms",rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.terms,onChange:e=>T(s=>({...s,terms:e.target.value})),disabled:!Q})]}),(0,a.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,a.jsx)(M.z,{type:"submit",disabled:!Q||"general"===ee,children:"general"===ee?"Saving...":"Save general settings"})})]})]}):null,"whatsapp"===et?(0,a.jsxs)("section",{className:"rounded-xl border bg-card/80 p-6 shadow-sm backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"WhatsApp"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Anti-ban controls"})]}),(0,a.jsx)(m,{className:"h-5 w-5 text-primary"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-4 rounded-xl border border-slate-800/80 bg-slate-950/60 p-5 shadow-inner shadow-slate-900/40",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-sky-500/10 text-sky-200",children:(0,a.jsx)(u.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"WhatsApp session"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ej})]})]}),(0,a.jsx)("span",{className:(0,L.cn)("rounded-full border px-3 py-1 text-xs font-semibold",ey.className),children:ey.label})]}),(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:ek.map((e,s)=>{let t=s+1,r=ev===t,n=ev>t&&"error"!==ef,l="error"===ef&&1===t;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:(0,L.cn)("flex min-w-[0] items-center gap-2 rounded-full border px-3 py-1.5 text-xs transition",l&&"border-rose-500/60 bg-rose-500/10 text-rose-100",!l&&r&&"connecting"===ef&&"border-sky-500/50 bg-sky-500/10 text-sky-50 animate-pulse",!l&&r&&"connecting"!==ef&&"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 shadow-inner shadow-emerald-900/30",!l&&!r&&n&&"border-emerald-500/40 bg-emerald-500/5 text-emerald-100",!l&&!r&&!n&&"border-slate-800 bg-slate-900/60 text-slate-300"),children:[(0,a.jsx)("span",{className:(0,L.cn)("block h-2 w-2 rounded-full",l?"bg-rose-400":r||n?"bg-emerald-400":"bg-slate-500")}),l?(0,a.jsx)(x,{className:"h-3.5 w-3.5 text-rose-200"}):null,(0,a.jsx)("span",{className:"truncate",children:e.label})]}),s<ek.length-1?(0,a.jsx)("div",{className:(0,L.cn)("h-px w-12 md:w-16",n?"bg-emerald-500/60":"bg-slate-800")}):null]},e.id)})}),(0,a.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"space-y-3",children:"qr_ready"===ef?(0,a.jsx)("div",{className:"rounded-xl border bg-slate-900/70 px-4 py-4 text-center shadow-lg shadow-emerald-900/30",children:(null==el?void 0:el.qrImage)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-auto max-w-[14rem] overflow-hidden rounded-lg border border-slate-800/80 bg-black/30 p-3",children:(0,a.jsx)("img",{src:el.qrImage,alt:"WhatsApp QR",className:"h-48 w-48 object-contain"})}),(0,a.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Scan this QR with WhatsApp on your phone"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"On your phone, open WhatsApp > Linked Devices > Link a device."})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"h-48 w-48 rounded-lg border border-slate-800/70 bg-slate-900/80 shadow-inner shadow-slate-900/30 animate-pulse"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Generating QR code..."})]})}):"connecting"===ef?(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-sky-500/30 bg-sky-500/10 px-4 py-3 shadow-inner shadow-sky-900/30",children:[(0,a.jsx)(p.Z,{className:"mt-0.5 h-5 w-5 animate-spin text-sky-100"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-sky-100",children:"Connecting to WhatsApp... please wait"}),(0,a.jsx)("p",{className:"text-xs text-slate-200",children:"If this takes too long, start a new session (force) or check connectivity."})]})]}):"connected"===ef?(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 shadow-inner shadow-emerald-900/30",children:[(0,a.jsx)(h,{className:"mt-0.5 h-5 w-5 text-emerald-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-emerald-100",children:"Connected to WhatsApp."}),(0,a.jsx)("p",{className:"text-xs text-emerald-50/80",children:"Messages will sync into the Control Room."})]})]}):"error"===ef?(0,a.jsxs)("div",{className:"space-y-2 rounded-lg border border-rose-500/50 bg-rose-500/10 px-4 py-3 shadow-inner shadow-rose-900/30",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(x,{className:"mt-0.5 h-5 w-5 text-rose-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-rose-100",children:"Failed to connect to WhatsApp."}),(0,a.jsx)("p",{className:"text-xs text-rose-50/80",children:"Try starting a new session or reset the connection."})]})]}),eN?(0,a.jsx)("pre",{className:"text-xs bg-slate-900/70 border border-rose-500/50 rounded-md p-2 overflow-x-auto",children:eN}):null]}):(0,a.jsx)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 px-4 py-3 text-xs text-slate-300 shadow-inner shadow-slate-900/30",children:"Start a session to generate a QR code and link WhatsApp to the control room."})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border border-slate-800/70 bg-slate-900/60 p-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Control the session"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Kick off a connection, force a new login, or reset if something looks off."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)(M.z,{size:"sm",onClick:()=>ei(!1),disabled:ed,children:ed?"Working...":"Start Session"}),(0,a.jsx)(M.z,{size:"sm",variant:"outline",onClick:()=>ei(!0),disabled:ed,children:ed?"Starting...":"Start New Session (force)"})]}),(0,a.jsx)("button",{type:"button",className:"self-start text-xs text-slate-400 underline decoration-dotted underline-offset-4 hover:text-slate-200 disabled:opacity-60",onClick:()=>eo(),disabled:ed,children:"Reset session"}),(0,a.jsx)("div",{className:"rounded-lg border border-dashed border-slate-800/80 bg-slate-950/40 p-3 text-xs text-slate-400",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(b,{className:"mt-0.5 h-4 w-4 text-slate-500"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{children:"Tips"}),(0,a.jsxs)("ul",{className:"list-disc space-y-1 pl-5",children:[(0,a.jsx)("li",{children:"Keep this tab open while scanning the QR."}),(0,a.jsx)("li",{children:"Use the force option if the QR refuses to update."}),(0,a.jsx)("li",{children:"Stable internet helps the handshake complete faster."})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"border-t border-slate-800/70 pt-3",children:[(0,a.jsxs)("button",{type:"button",className:"flex items-center gap-2 text-xs text-slate-400 hover:text-slate-200",onClick:()=>en(e=>!e),children:[(0,a.jsx)("span",{children:"Developer debug (WhatsApp status)"}),er?(0,a.jsx)(g,{className:"h-4 w-4"}):(0,a.jsx)(y,{className:"h-4 w-4"})]}),er?(0,a.jsx)("pre",{className:"mt-2 max-h-40 overflow-x-auto rounded-md border border-slate-700 bg-slate-950/80 p-2 text-[10px] text-slate-200",children:ec||"No status received yet."}):null]})]}),(0,a.jsxs)("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:e=>{e.preventDefault(),eb({key:"whatsapp",value:eg})},children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"businessNumber",children:"Business number"}),(0,a.jsx)("input",{id:"businessNumber",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:K.businessNumber,onChange:e=>_(s=>({...s,businessNumber:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"sessionName",children:"Session name"}),(0,a.jsx)("input",{id:"sessionName",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:K.sessionName,onChange:e=>_(s=>({...s,sessionName:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"dailyLimit",children:"Daily limit"}),(0,a.jsx)("input",{id:"dailyLimit",type:"number",min:10,max:5e3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:K.dailyLimit,onChange:e=>_(s=>({...s,dailyLimit:Number(e.target.value)})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Random delay (seconds)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",min:0,className:"flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:K.randomDelayMin,onChange:e=>_(s=>({...s,randomDelayMin:Number(e.target.value)})),disabled:!Q}),(0,a.jsx)("input",{type:"number",min:0,className:"flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:K.randomDelayMax,onChange:e=>_(s=>({...s,randomDelayMax:Number(e.target.value)})),disabled:!Q})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"optOut",children:"Opt-out keywords (comma separated)"}),(0,a.jsx)("input",{id:"optOut",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:X,onChange:e=>$(e.target.value),disabled:!Q})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,a.jsx)("input",{id:"respectBusinessHours",type:"checkbox",className:"h-4 w-4",checked:K.respectBusinessHours,onChange:e=>_(s=>({...s,respectBusinessHours:e.target.checked})),disabled:!Q}),(0,a.jsx)("label",{htmlFor:"respectBusinessHours",className:"text-sm text-muted-foreground",children:"Respect business hours window"})]}),(0,a.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,a.jsx)(M.z,{type:"submit",disabled:!Q||"whatsapp"===ee,children:"whatsapp"===ee?"Saving...":"Save WhatsApp settings"})})]})]}):null,"ai"===et?(0,a.jsxs)("section",{className:"rounded-xl border bg-card/80 p-6 shadow-sm backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"h-5 w-5 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"AI"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Assistant preferences"})]})]}),(0,a.jsx)(j,{className:"h-5 w-5 text-primary"})]}),(0,a.jsxs)("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:e=>{e.preventDefault(),eb({key:"ai",value:J})},children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"provider",children:"Provider"}),(0,a.jsx)("input",{id:"provider",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.provider,onChange:e=>G(s=>({...s,provider:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"model",children:"Model"}),(0,a.jsx)("input",{id:"model",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.model,onChange:e=>G(s=>({...s,model:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"apiKey",children:"API key"}),(0,a.jsx)("input",{id:"apiKey",type:"password",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.apiKey,onChange:e=>G(s=>({...s,apiKey:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"baseUrl",children:"Base URL (optional)"}),(0,a.jsx)("input",{id:"baseUrl",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.baseUrl,onChange:e=>G(s=>({...s,baseUrl:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"temperature",children:"Temperature"}),(0,a.jsx)("input",{id:"temperature",type:"number",min:0,max:1,step:.05,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.temperature,onChange:e=>G(s=>({...s,temperature:Number(e.target.value)})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"maxTokens",children:"Max tokens"}),(0,a.jsx)("input",{id:"maxTokens",type:"number",min:64,max:4e3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:J.maxTokens,onChange:e=>G(s=>({...s,maxTokens:Number(e.target.value)})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-between gap-2",children:[(0,a.jsx)(M.z,{type:"submit",disabled:!Q||"ai"===ee,children:"ai"===ee?"Saving...":"Save AI settings"}),(0,a.jsx)(M.z,{type:"button",variant:"outline",onClick:()=>s.success("Test command queued - implement transport hook next."),disabled:!Q,children:"Run test prompt"})]})]})]}):null,"backup"===et?(0,a.jsxs)("section",{className:"rounded-xl border bg-card/80 p-6 shadow-sm backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Backup & safety"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Disaster recovery"})]}),(0,a.jsx)(v,{className:"h-5 w-5 text-primary"})]}),(0,a.jsxs)("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:e=>{e.preventDefault(),eb({key:"backup",value:V})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{id:"manualEnabled",type:"checkbox",className:"h-4 w-4",checked:V.manualEnabled,onChange:e=>Y(s=>({...s,manualEnabled:e.target.checked})),disabled:!Q}),(0,a.jsx)("label",{htmlFor:"manualEnabled",className:"text-sm text-muted-foreground",children:"Enable manual backup button in dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{id:"includeUploads",type:"checkbox",className:"h-4 w-4",checked:V.includeUploads,onChange:e=>Y(s=>({...s,includeUploads:e.target.checked})),disabled:!Q}),(0,a.jsx)("label",{htmlFor:"includeUploads",className:"text-sm text-muted-foreground",children:"Include uploads & WhatsApp sessions"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"retentionDays",children:"Retention (days)"}),(0,a.jsx)("input",{id:"retentionDays",type:"number",min:1,max:365,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:V.retentionDays,onChange:e=>Y(s=>({...s,retentionDays:Number(e.target.value)})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"schedule",children:"Daily schedule (24h)"}),(0,a.jsx)("input",{id:"schedule",type:"time",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:V.schedule,onChange:e=>Y(s=>({...s,schedule:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"notifyEmail",children:"Notify email"}),(0,a.jsx)("input",{id:"notifyEmail",type:"email",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:V.notifyEmail,onChange:e=>Y(s=>({...s,notifyEmail:e.target.value})),disabled:!Q})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex justify-between gap-2",children:[(0,a.jsx)(M.z,{type:"submit",disabled:!Q||"backup"===ee,children:"backup"===ee?"Saving...":"Save backup plan"}),(0,a.jsx)(M.z,{type:"button",variant:"outline",disabled:!Q||ep.isPending,onClick:()=>ep.mutate(),children:ep.isPending?"Creating backup...":(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(N,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Trigger manual backup"})]})})]}),(0,a.jsxs)("div",{className:"md:col-span-2 rounded-lg border border-dashed px-4 py-3 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Checklist before production"})]}),(0,a.jsxs)("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:[(0,a.jsx)("li",{children:"Verify S3 / local backup destination has enough storage."}),(0,a.jsx)("li",{children:"Store encryption password safely (preferably in a vault)."}),(0,a.jsx)("li",{children:"Test restore on a staging database monthly."})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 rounded-xl border border-dashed bg-card/30 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:"Recent backups"}),(0,a.jsx)(M.z,{variant:"ghost",size:"sm",onClick:()=>ex.refetch(),disabled:ex.isFetching,children:ex.isFetching?"Refreshing...":"Refresh"})]}),ex.isLoading?(0,a.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading backup history..."}):ex.data&&ex.data.length>0?(0,a.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"text-xs uppercase text-muted-foreground",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2",children:"File"}),(0,a.jsx)("th",{className:"py-2",children:"Size"}),(0,a.jsx)("th",{className:"py-2",children:"Created"}),(0,a.jsx)("th",{className:"py-2 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:ex.data.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"py-2 font-mono text-xs",children:e.filename}),(0,a.jsxs)("td",{className:"py-2",children:[(e.size/1048576).toFixed(1)," MB"]}),(0,a.jsx)("td",{className:"py-2",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("td",{className:"py-2 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("a",{href:"/api/backups/".concat(encodeURIComponent(e.filename),"/download"),className:"text-xs text-primary underline",children:"Download"}),(0,a.jsx)("button",{className:"text-xs text-muted-foreground underline disabled:opacity-50",disabled:eh.isPending,onClick:()=>eh.mutate(e.filename),children:eh.isPending?"Restoring...":"Extract"})]})})]},e.filename))})]})}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-6 text-center text-muted-foreground",children:[(0,a.jsx)("div",{className:"mb-2 flex h-12 w-12 items-center justify-center rounded-full border border-dashed border-slate-800 bg-slate-950/60",children:(0,a.jsx)(w.Z,{className:"h-6 w-6 text-slate-500"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-100",children:"No backups generated yet."}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Run a manual backup to start your recovery history."})]})]})]}):null]})]})})}},2628:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var a=t(7573),r=t(1695),n=t(7653),l=t(1799);function d(e){let{children:s,redirectOnFail:t=!0}=e,{user:d,loading:i,error:o,status:c}=(0,l.a)(),m=(0,r.useRouter)();return((0,n.useEffect)(()=>{if(t&&!i&&(!d||o||"unauthenticated"===c)){let e=o?"?reason=".concat(encodeURIComponent(o)):"";m.replace("/login".concat(e))}},[d,i,o,m,t,c]),i)?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading session..."}):!d&&t?null:(0,a.jsx)(a.Fragment,{children:s})}},3735:function(e,s,t){"use strict";t.d(s,{SectionHeader:function(){return n}});var a=t(7573),r=t(9147);function n(e){let{icon:s,overline:t,title:n,description:l,actions:d,className:i}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-wrap items-center justify-between gap-4",i),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s?(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full border border-sky-500/30 bg-sky-500/10 text-sky-400 shadow-sm",children:s}):null,(0,a.jsxs)("div",{children:[t?(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:t}):null,(0,a.jsx)("h1",{className:"text-xl font-semibold text-slate-50 md:text-2xl",children:n}),l?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:l}):null]})]}),d?(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:d}):null]})}},7785:function(e,s,t){"use strict";t.d(s,{s:function(){return n}});var a=t(7573),r=t(9147);function n(e){let{items:s,value:t,onValueChange:n}=e;return(0,a.jsx)("div",{className:"inline-flex rounded-full border border-slate-800 bg-slate-950/70 p-1 shadow-sm backdrop-blur",children:s.map(e=>{let s=t===e.id;return(0,a.jsx)("button",{type:"button",onClick:()=>n(e.id),className:(0,r.cn)("rounded-full px-3 py-1 text-xs transition",s?"bg-sky-500 text-slate-950 shadow-sm":"text-slate-400 hover:text-slate-100"),children:e.label},e.id)})})}},327:function(e,s,t){"use strict";t.d(s,{A:function(){return a}});let a=(e,s)=>!!e&&s.includes(e)},5036:function(e,s,t){"use strict";t.d(s,{BX:function(){return l},ML:function(){return n},fk:function(){return d},iL:function(){return o},vh:function(){return i},wi:function(){return r}});var a=t(5118);async function r(e){return(0,a.SC)("/api/whatsapp/session/init",{method:"POST",body:{forceNewSession:e}})}async function n(){return(0,a.SC)("/api/whatsapp/session/status")}async function l(){return(0,a.SC)("/api/whatsapp/session/reset",{method:"POST"})}async function d(){return(0,a.SC)("/api/whatsapp/chats")}async function i(e){return(0,a.SC)("/api/whatsapp/chats/".concat(encodeURIComponent(e),"/messages"))}async function o(e,s){await (0,a.SC)("/api/whatsapp/chats/"+encodeURIComponent(e)+"/messages",{method:"POST",body:{text:s}})}},2389:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7653);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&t.indexOf(e)===s).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,s)=>{let{color:t="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:s,...l,width:r,height:r,stroke:t,strokeWidth:i?24*Number(d)/Number(r):d,className:n("lucide",o),...u},[...m.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(c)?c:[c]])}),i=(e,s)=>{let t=(0,a.forwardRef)((t,l)=>{let{className:i,...o}=t;return(0,a.createElement)(d,{ref:l,iconNode:s,className:n("lucide-".concat(r(e)),i),...o})});return t.displayName="".concat(e),t}},4115:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2389).Z)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},5721:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2389).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5015:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2389).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])}},function(e){e.O(0,[362,485,422,293,914,744],function(){return e(e.s=9619)}),_N_E=e.O()}]);