(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9109],{89776:function(e,t,s){Promise.resolve().then(s.bind(s,40239))},40239:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var r=s(27573),a=s(77930),n=s(31988),l=s(15969),i=s(88146),o=s(7653),d=s(22628),c=s(45118),u=s(50466),x=s(73638),m=s(41799),b=s(327),h=s(17051),f=s(90113),p=s(96295),g=s(43735),v=s(83185),j=s(98882),y=s(14699),N=s(35995),w=s(20144),k=s(25555),E=s(72829),C=s(79901),D=s(1565),T=s(75330),A=s(26302),R=s(18177),P=s(23727),S=s(38333),Z=s(10997),L=s(29147),G=s(33571),M=s(10957);let _=[{id:"PENDING",title:"Awaiting Quote",status:"PENDING",icon:(0,r.jsx)(k.Z,{className:"h-4 w-4"}),color:"text-amber-400",bgGradient:"from-amber-500/20 to-orange-500/10"},{id:"QUOTED",title:"Quotation Sent",status:"QUOTED",icon:(0,r.jsx)(E.Z,{className:"h-4 w-4"}),color:"text-blue-400",bgGradient:"from-blue-500/20 to-cyan-500/10"},{id:"APPROVED",title:"Approved",status:"APPROVED",icon:(0,r.jsx)(C.Z,{className:"h-4 w-4"}),color:"text-violet-400",bgGradient:"from-violet-500/20 to-purple-500/10"},{id:"IN_PROGRESS",title:"Repairing",status:"IN_PROGRESS",icon:(0,r.jsx)(D.Z,{className:"h-4 w-4"}),color:"text-orange-400",bgGradient:"from-orange-500/20 to-red-500/10"},{id:"COMPLETED",title:"Completed",status:"COMPLETED",icon:(0,r.jsx)(C.Z,{className:"h-4 w-4"}),color:"text-emerald-400",bgGradient:"from-emerald-500/20 to-green-500/10"}],I={LOW:{color:"bg-slate-500",label:"Low",dot:"bg-slate-400"},NORMAL:{color:"bg-blue-500",label:"Normal",dot:"bg-blue-400"},HIGH:{color:"bg-orange-500",label:"High",dot:"bg-orange-400"},URGENT:{color:"bg-red-500 animate-pulse",label:"Urgent",dot:"bg-red-400 animate-pulse"}},O=o.forwardRef((e,t)=>{var s,a,n,l;let{job:d,onDelete:c,userRole:u,isDragging:x}=e,[m,h]=o.useState(!1),{attributes:f,listeners:p,setNodeRef:g,transform:j,transition:y,isDragging:k}=(0,N.nB)({id:d.id,data:{job:d}}),E=o.useCallback(e=>{g(e),"function"==typeof t?t(e):t&&(t.current=e)},[g,t]),C={transform:w.ux.Transform.toString(j),transition:y},D=(0,M.N)(),_=I[d.priority];return(0,r.jsxs)(v.E.div,{ref:E,style:C,...f,...p,layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:k?.5:1,scale:k?1.05:1,rotateZ:k?3:0},exit:{opacity:0,scale:.9},whileHover:{y:-2},className:(0,L.cn)("group relative cursor-grab active:cursor-grabbing","rounded-xl border border-border bg-card/80 backdrop-blur-sm","shadow-sm hover:shadow-lg hover:shadow-primary/5","transition-all duration-200"),children:[(0,r.jsx)("div",{className:(0,L.cn)("absolute left-0 top-0 h-full w-1 rounded-l-xl",_.color)}),d.thumbnailUrl&&(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-t-xl",children:[(0,r.jsx)("img",{src:d.thumbnailUrl,alt:"thumbnail",className:"h-28 w-full object-cover transition-transform duration-300 group-hover:scale-105"}),d.photoCount&&d.photoCount>1&&(0,r.jsxs)("span",{className:"absolute right-2 top-2 rounded-full bg-black/70 px-2 py-0.5 text-xs font-medium text-white backdrop-blur-sm",children:[d.photoCount," photos"]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-card to-transparent"})]}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)(i.default,{href:"/jobs/".concat(d.id),children:(0,r.jsx)("h4",{className:"font-semibold text-sm text-foreground line-clamp-2 hover:text-primary transition-colors",children:d.title})}),(0,r.jsxs)("div",{className:"mt-2 space-y-1.5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)(T.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"truncate",children:null===(s=d.customer)||void 0===s?void 0:s.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)(A.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"truncate",children:[null===(a=d.device)||void 0===a?void 0:a.deviceType,null===(n=d.device)||void 0===n?void 0:n.brand,null===(l=d.device)||void 0===l?void 0:l.model].filter(Boolean).join(" ")})]}),d.quotedAmount&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,r.jsx)(R.Z,{className:"h-3 w-3 text-green-500"}),(0,r.jsxs)("span",{className:"font-semibold text-green-500",children:["RM ",Number(d.quotedAmount).toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:(0,L.cn)("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold text-white",_.color),children:[(0,r.jsx)("span",{className:(0,L.cn)("h-1.5 w-1.5 rounded-full bg-white","URGENT"===d.priority&&"animate-pulse")}),_.label]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[(0,r.jsx)(P.Z,{className:"h-3 w-3"}),new Date(d.createdAt).toLocaleDateString()]})]}),(0,r.jsxs)(v.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3 flex gap-2 overflow-hidden",children:[(0,r.jsx)(G.w,{size:"sm",variant:"outline",className:"h-7 flex-1 text-xs",asChild:!0,onPointerDown:e=>e.stopPropagation(),children:(0,r.jsxs)(i.default,{href:"/jobs/".concat(d.id),onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(S.Z,{className:"h-3 w-3 mr-1"}),"View"]})}),(0,b.A)(u,["ADMIN","MANAGER"])&&c&&(0,r.jsx)(G.w,{size:"sm",variant:"destructive",className:"h-7 text-xs",onPointerDown:e=>{e.stopPropagation()},onClick:async e=>{e.stopPropagation(),e.preventDefault(),!m&&await D({title:"Delete Job",description:"Are you sure you want to delete this job? This action cannot be undone.",variant:"destructive",confirmText:"Delete"})&&c&&(h(!0),c(d.id),setTimeout(()=>h(!1),2e3))},disabled:m,children:(0,r.jsx)(Z.Z,{className:"h-3 w-3"})})]})]})]})});function z(e){let{column:t,jobs:s,activeId:a,onDelete:n,userRole:l}=e,{setNodeRef:i,isOver:o}=(0,y.Zj)({id:t.status});return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)(v.E.div,{className:(0,L.cn)("flex items-center justify-between rounded-t-xl border border-b-0 border-border px-4 py-3","bg-gradient-to-br backdrop-blur-sm",t.bgGradient),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:(0,L.cn)("rounded-lg bg-card/50 p-2",t.color),children:t.icon}),(0,r.jsx)("h3",{className:"font-bold text-sm text-foreground",children:t.title})]}),(0,r.jsx)(v.E.span,{className:(0,L.cn)("rounded-full bg-card/80 border border-border px-2.5 py-1 text-xs font-bold",t.color),initial:{scale:1.2},animate:{scale:1},children:s.length},s.length)]}),(0,r.jsx)("div",{ref:i,className:(0,L.cn)("flex-1 min-h-[400px] rounded-b-xl border border-border p-3 space-y-3","bg-card/30 backdrop-blur-sm transition-all duration-200",o&&"bg-primary/10 border-primary/50 ring-2 ring-primary/20"),children:(0,r.jsx)(N.Fo,{items:s.map(e=>e.id),strategy:N.qw,children:(0,r.jsx)(j.M,{mode:"popLayout",children:0===s.length?(0,r.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex h-32 items-center justify-center rounded-lg border-2 border-dashed border-border text-xs text-muted-foreground",children:"Drop jobs here"}):s.map(e=>(0,r.jsx)(O,{job:e,onDelete:n,userRole:l,isDragging:e.id===a},e.id))})})})]})}function U(e){let{jobs:t,onStatusChange:s,onDelete:a,userRole:n}=e,[l,i]=(0,o.useState)(null),d=(0,y.Dy)((0,y.VT)(y.we,{activationConstraint:{distance:8}})),c=t.find(e=>e.id===l),u=async e=>{let{active:r,over:a}=e;if(i(null),!a)return;let n=r.id,l=a.id,o=t.find(e=>e.id===n);o&&o.status!==l&&await s(n,l)},x=e=>t.filter(t=>t.status===e);return(0,r.jsxs)(y.LB,{sensors:d,collisionDetection:y.ey,onDragStart:e=>{i(e.active.id)},onDragEnd:u,children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:_.map(e=>{let t=x(e.status);return(0,r.jsx)(z,{column:e,jobs:t,activeId:l,onDelete:a,userRole:n},e.id)})}),(0,r.jsx)(y.y9,{dropAnimation:{duration:200,easing:"ease-out"},children:l&&c?(0,r.jsx)(v.E.div,{initial:{scale:1},animate:{scale:1.05,rotate:3},className:"opacity-90 shadow-2xl",children:(0,r.jsx)(O,{job:c,userRole:n})}):null})]})}function F(){let e=(0,a.NL)(),{user:t}=(0,m.a)(),[s,v]=(0,o.useState)("kanban"),j=(0,x.p)(),y=(0,n.a)({queryKey:["jobs"],queryFn:async()=>(0,c.R1)("/api/jobs")}),N=(0,l.D)({mutationFn:async e=>{let{jobId:t,status:s}=e;return console.log("Updating job:",t,"to status:",s),(0,c.pE)("/api/jobs/".concat(t),{status:s})},onSuccess:()=>{e.invalidateQueries({queryKey:["jobs"]}),j.success("Job status updated")},onError:e=>{console.error("Update error:",e),j.error((null==e?void 0:e.message)||"Failed to update job status")}}),w=(0,l.D)({mutationFn:async e=>(0,c.QW)("/api/jobs/".concat(e)),onSuccess:async()=>{await e.invalidateQueries({queryKey:["jobs"]}),j.success("Job deleted")},onError:t=>{var s;(null==t?void 0:null===(s=t.message)||void 0===s?void 0:s.includes("not found"))||(null==t?void 0:t.status)===404?(e.invalidateQueries({queryKey:["jobs"]}),j.info("Job may have already been deleted")):j.error((null==t?void 0:t.message)||"Failed to delete job")}}),k=y.data||[],E=async(e,t)=>{await N.mutateAsync({jobId:e,status:t})};return(0,r.jsx)(d.Z,{children:(0,r.jsxs)("section",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"rounded-xl border bg-gradient-to-br from-blue-900/20 to-cyan-900/20 px-6 py-5 shadow-lg backdrop-blur",children:(0,r.jsx)(g.SectionHeader,{icon:(0,r.jsx)(h.Z,{className:"h-5 w-5"}),overline:"Work Management",title:"Repair Jobs Workflow",description:"Track and manage repair jobs through the complete lifecycle with drag & drop.",actions:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-cyan-900/20 border border-cyan-500/20 px-3 py-1.5",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-cyan-400 animate-pulse"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-cyan-300",children:[k.length," Active"]})]}),(0,r.jsxs)("div",{className:"flex rounded-lg border border-slate-800/70 bg-slate-950/60 p-1 shadow-inner",children:[(0,r.jsxs)("button",{onClick:()=>v("kanban"),className:"flex items-center gap-2 rounded px-3 py-1.5 text-sm font-medium transition-all duration-200 ".concat("kanban"===s?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg shadow-cyan-500/50":"text-slate-400 hover:text-slate-200"),children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Kanban"]}),(0,r.jsxs)("button",{onClick:()=>v("list"),className:"flex items-center gap-2 rounded px-3 py-1.5 text-sm font-medium transition-all duration-200 ".concat("list"===s?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg shadow-cyan-500/50":"text-slate-400 hover:text-slate-200"),children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),"List"]})]})]})})}),(0,b.A)(null==t?void 0:t.role,["ADMIN","MANAGER","TECHNICIAN"])?null:(0,r.jsx)("div",{className:"rounded-md border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-100",children:"You have read-only access to jobs. Contact an administrator for edit permissions."}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,r.jsx)("div",{children:"kanban"===s?(0,r.jsx)("div",{className:"rounded-xl border bg-card/80 p-4 shadow-sm backdrop-blur",children:y.isLoading?(0,r.jsx)("div",{className:"p-6 text-center text-sm text-muted-foreground",children:"Loading jobs..."}):y.isError?(0,r.jsx)("div",{className:"p-6 text-center text-sm text-red-500",children:"Error loading jobs"}):0===k.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-20 text-center text-muted-foreground",children:[(0,r.jsx)(h.Z,{className:"h-12 w-12 text-slate-600"}),(0,r.jsx)("p",{className:"text-sm font-medium text-slate-100",children:"No jobs yet"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Create your first repair job to get started."})]}):(0,r.jsx)(U,{jobs:k,onStatusChange:E,onDelete:e=>w.mutate(e),userRole:null==t?void 0:t.role})}):(0,r.jsx)("div",{className:"rounded-xl border bg-card/80 shadow-sm backdrop-blur overflow-hidden",children:y.isLoading?(0,r.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Loading..."}):y.isError?(0,r.jsx)("div",{className:"p-6 text-sm text-red-500",children:"Error loading jobs"}):0===k.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-10 text-center text-muted-foreground",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-100",children:"No jobs yet"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Create your first job to get started."})]}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-slate-950/60 text-xs uppercase tracking-wide text-slate-400",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Title"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Customer"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Device"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Priority"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:k.map((e,s)=>{var a,n,l,o;return(0,r.jsxs)("tr",{className:"border-b border-slate-800/70 text-sm transition hover:bg-slate-900/70 ".concat(s%2==0?"bg-slate-950/40":""),children:[(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)(i.default,{href:"/jobs/".concat(e.id),className:"underline hover:no-underline",children:e.title})}),(0,r.jsx)("td",{className:"px-4 py-2",children:null===(a=e.customer)||void 0===a?void 0:a.name}),(0,r.jsx)("td",{className:"px-4 py-2",children:[null===(n=e.device)||void 0===n?void 0:n.deviceType,null===(l=e.device)||void 0===l?void 0:l.brand,null===(o=e.device)||void 0===o?void 0:o.model].filter(Boolean).join(" ")}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.status}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.priority}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.z,{asChild:!0,size:"sm",variant:"outline",children:(0,r.jsx)(i.default,{href:"/jobs/".concat(e.id),children:"View"})}),(0,b.A)(null==t?void 0:t.role,["ADMIN","MANAGER"])?(0,r.jsx)(u.z,{size:"sm",variant:"destructive",onClick:()=>w.mutate(e.id),disabled:w.isPending,children:"Delete"}):null]})})]},e.id)})})]})})})})]})})}O.displayName="JobCard"},22628:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(27573),a=s(81695),n=s(7653),l=s(41799);function i(e){let{children:t,redirectOnFail:s=!0}=e,{user:i,loading:o,error:d,status:c}=(0,l.a)(),u=(0,a.useRouter)();return((0,n.useEffect)(()=>{if(s&&!o&&(!i||d||"unauthenticated"===c)){let e=d?"?reason=".concat(encodeURIComponent(d)):"";u.replace("/login".concat(e))}},[i,o,d,u,s,c]),o)?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading session..."}):!i&&s?null:(0,r.jsx)(r.Fragment,{children:t})}},10957:function(e,t,s){"use strict";s.d(t,{N:function(){return o},W:function(){return i}});var r=s(27573),a=s(7653),n=s(3458);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useRef)(null),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{d(!0)},[]);let m=(0,a.useCallback)(e=>new Promise(t=>{var s,r,a,n,l;i({id:Date.now(),resolve:t,title:null!==(s=e.title)&&void 0!==s?s:"Confirm action",description:null!==(r=e.description)&&void 0!==r?r:"Are you sure you want to proceed? This action cannot be undone.",confirmText:null!==(a=e.confirmText)&&void 0!==a?a:"Confirm",cancelText:null!==(n=e.cancelText)&&void 0!==n?n:"Cancel",variant:null!==(l=e.variant)&&void 0!==l?l:"default"})}),[]),b=(0,a.useMemo)(()=>({confirm:m}),[m]),h=(0,a.useCallback)(e=>{i(t=>(t&&t.resolve(e),null))},[]);(0,a.useEffect)(()=>{if(!s)return;c.current=document.activeElement||null;let e=setTimeout(()=>{var e;null===(e=u.current||x.current)||void 0===e||e.focus()},0),t=e=>{if(s){if("Escape"===e.key){e.preventDefault(),h(!1);return}if("Enter"===e.key){e.preventDefault(),h(!0);return}if("Tab"===e.key){let t=[x.current,u.current].filter(Boolean);if(0===t.length)return;let s=t.indexOf(document.activeElement);if(e.shiftKey){let r=s<=0?t[t.length-1]:t[s-1];e.preventDefault(),r.focus()}else{let r=-1===s||s>=t.length-1?t[0]:t[s+1];e.preventDefault(),r.focus()}}}};return document.addEventListener("keydown",t),()=>{clearTimeout(e),document.removeEventListener("keydown",t);try{var s;null===(s=c.current)||void 0===s||s.focus()}catch(e){}}},[s,h]);let f=o&&s?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"presentation",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>h(!1)}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-xl border border-slate-800 bg-slate-950/90 p-5 shadow-2xl shadow-black/40 outline-none backdrop-blur",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-desc",tabIndex:-1,children:[(0,r.jsx)("h3",{id:"confirm-title",className:"mb-1 text-lg font-semibold text-slate-50",children:s.title}),(0,r.jsx)("p",{id:"confirm-desc",className:"mb-4 text-sm text-slate-300",children:s.description}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{ref:x,className:"rounded-md border border-slate-700 px-3 py-1.5 text-sm text-slate-200 transition hover:border-slate-500 hover:bg-slate-900",onClick:()=>h(!1),children:s.cancelText}),(0,r.jsx)("button",{ref:u,className:"rounded-md px-3 py-1.5 text-sm text-white transition ".concat("destructive"===s.variant?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-500"),onClick:()=>h(!0),children:s.confirmText})]})]})]}):null;return(0,r.jsxs)(l.Provider,{value:b,children:[t,o&&"undefined"!=typeof document&&f?(0,n.createPortal)(f,document.body):null]})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e.confirm}},43735:function(e,t,s){"use strict";s.d(t,{SectionHeader:function(){return n}});var r=s(27573),a=s(29147);function n(e){let{icon:t,overline:s,title:n,description:l,actions:i,className:o}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("flex flex-wrap items-center justify-between gap-4",o),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t?(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full border border-sky-500/30 bg-sky-500/10 text-sky-400 shadow-sm",children:t}):null,(0,r.jsxs)("div",{children:[s?(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:s}):null,(0,r.jsx)("h1",{className:"text-xl font-semibold text-slate-50 md:text-2xl",children:n}),l?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:l}):null]})]}),i?(0,r.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:i}):null]})}},73638:function(e,t,s){"use strict";s.d(t,{V:function(){return o},p:function(){return d}});var r=s(27573),a=s(7653),n=s(3458);function l(e){let{message:t,variant:s="info",onClose:n,duration:l=2500}=e;return(0,a.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>n&&n(),l);return()=>clearTimeout(e)},[l,n]),(0,r.jsx)("div",{className:"pointer-events-auto fixed bottom-4 right-4 z-50 max-w-sm rounded-lg border bg-slate-950/90 px-4 py-3 shadow-lg shadow-black/40 backdrop-blur ".concat("success"===s?"border-emerald-500/60 text-emerald-50":"error"===s?"border-red-500/60 text-red-50":"warning"===s?"border-amber-500/60 text-amber-50":"border-slate-700 text-slate-50"),role:"status","aria-live":"polite",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"text-sm",children:t}),n?(0,r.jsx)("button",{className:"ml-auto text-xs text-slate-300 opacity-80 transition hover:opacity-100",onClick:n,"aria-label":"Close",children:"x"}):null]})})}let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c(!0)},[]);let u=(0,a.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),x=(0,a.useCallback)((e,t)=>{var s,r;let a={id:Math.floor(Date.now()+1e3*Math.random()),message:e,variant:null!==(s=null==t?void 0:t.variant)&&void 0!==s?s:"info",duration:null!==(r=null==t?void 0:t.duration)&&void 0!==r?r:2500};o(e=>[...e,a])},[]),m=(0,a.useMemo)(()=>({show:x,success:(e,t)=>x(e,{variant:"success",duration:t}),error:(e,t)=>x(e,{variant:"error",duration:t}),info:(e,t)=>x(e,{variant:"info",duration:t}),warning:(e,t)=>x(e,{variant:"warning",duration:t})}),[x]);(0,a.useEffect)(()=>(globalThis.__toast=m,()=>{globalThis.__toast===m&&delete globalThis.__toast}),[m]);let b=d&&s.length>0?(0,r.jsx)(r.Fragment,{children:s.map(e=>(0,r.jsx)(l,{message:e.message,variant:e.variant,duration:e.duration,onClose:()=>u(e.id)},e.id))}):null;return(0,r.jsxs)(i.Provider,{value:m,children:[t,d&&"undefined"!=typeof document&&b?(0,n.createPortal)(b,document.body):null]})}function d(){let e=(0,a.useContext)(i);if(!e)throw Error("useToast must be used within ToastProvider");return e}},50466:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(27573),a=s(7653),n=s(8828),l=s(49289),i=s(29147);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:t,...c})});d.displayName="Button"},327:function(e,t,s){"use strict";s.d(t,{A:function(){return r}});let r=(e,t)=>!!e&&t.includes(e)}},function(e){e.O(0,[6340,1294,2386,3953,4701,318,5611,1293,1528,1744],function(){return e(e.s=89776)}),_N_E=e.O()}]);