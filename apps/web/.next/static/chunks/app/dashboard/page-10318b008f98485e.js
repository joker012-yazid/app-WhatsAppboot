(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{89210:function(e,s,t){Promise.resolve().then(t.bind(t,96892))},96892:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return H}});var a=t(27573),l=t(7653),r=t(88146),i=t(83185),n=t(16843),o=t(27778),d=t(3172),c=t(18177),u=t(25555),x=t(17051),m=t(83989),h=t(20054),f=t(22898),p=t(12439),g=t(47999),j=t(69e3),v=t(11547),y=t(35486),b=t(50896),N=t(48266),w=t(58688),E=t(53364),C=t(41799),R=t(45118),S=t(33571),D=t(29147);let k={default:"bg-card border border-border",glass:"glass",gradient:"gradient-border bg-card",glow:"bg-card border border-border hover-glow"},P={lift:{rest:{y:0,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},hover:{y:-4,boxShadow:"0 20px 40px -15px hsl(var(--primary) / 0.2)",transition:{duration:.2,ease:"easeOut"}}},scale:{rest:{scale:1},hover:{scale:1.02,transition:{duration:.2,ease:"easeOut"}}},glow:{rest:{boxShadow:"0 0 0 0 hsl(var(--primary) / 0)"},hover:{boxShadow:"0 0 30px hsl(var(--primary) / 0.3)",transition:{duration:.3}}},none:{rest:{},hover:{}}},O=l.forwardRef((e,s)=>{let{className:t,variant:l="default",hoverEffect:r="lift",children:n,...o}=e;return(0,a.jsx)(i.E.div,{ref:s,className:(0,D.cn)("rounded-xl p-6 transition-colors",k[l],t),initial:"rest",whileHover:"hover",variants:P[r],...o,children:n})});O.displayName="AnimatedCard",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,D.cn)("flex flex-col space-y-1.5 pb-4",t),...l})}).displayName="CardHeader",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,D.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})}).displayName="CardTitle",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,D.cn)("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,D.cn)("pt-0",t),...l})}).displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,D.cn)("flex items-center pt-4",t),...l})}).displayName="CardFooter";var T=t(38683),Z=t(36537),A=t(97044);function J(e){let{value:s,duration:t=1.5,delay:r=0,prefix:n="",suffix:o="",decimals:d=0,separator:c=",",className:u,triggerOnView:x=!0,formatFn:m}=e,h=(0,l.useRef)(null),f=(0,T.Y)(h,{once:!0,margin:"0px 0px -100px 0px"}),[p,g]=(0,l.useState)(!x),j=(0,Z.q)(0,{duration:1e3*t,bounce:0}),v=(0,A.H)(j,e=>{if(m)return m(e);let[s,t]=e.toFixed(d).split("."),a=s.replace(/\B(?=(\d{3})+(?!\d))/g,c);return d>0?"".concat(a,".").concat(t):a});return(0,l.useEffect)(()=>{if(x&&f&&!p){let e=setTimeout(()=>{j.set(s),g(!0)},1e3*r);return()=>clearTimeout(e)}if(!x){let e=setTimeout(()=>{j.set(s)},1e3*r);return()=>clearTimeout(e)}},[f,s,j,r,x,p]),(0,l.useEffect)(()=>{p&&j.set(s)},[s,p,j]),(0,a.jsxs)("span",{ref:h,className:(0,D.cn)("tabular-nums",u),children:[n,(0,a.jsx)(i.E.span,{children:v}),o]})}function I(e){let{value:s,currency:t="MYR",locale:l="en-MY",...r}=e;return(0,a.jsx)(J,{value:s,formatFn:e=>new Intl.NumberFormat(l,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),...r})}function B(e){let{className:s,variant:t="default",animation:l="shimmer",...r}=e;return(0,a.jsx)("div",{className:(0,D.cn)({default:"rounded-md",circular:"rounded-full",rectangular:"rounded-none"}[t],{shimmer:"animate-shimmer bg-gradient-to-r from-muted via-muted-foreground/5 to-muted bg-[length:200%_100%]",pulse:"animate-pulse bg-muted",none:"bg-muted"}[l],s),...r})}function F(){return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:3}).map((e,s)=>(0,a.jsxs)("div",{className:"rounded-xl border border-border bg-card p-6 space-y-3",children:[(0,a.jsx)(B,{className:"h-3 w-24"}),(0,a.jsx)(B,{className:"h-8 w-16"}),(0,a.jsx)(B,{className:"h-3 w-32"})]},s))})}let _={up:{y:30,x:0},down:{y:-30,x:0},left:{x:30,y:0},right:{x:-30,y:0}};function G(e){let{children:s,direction:t="up",delay:l=0,duration:r=.4,distance:n,className:o,...d}=e,c=_[t],u=n?{x:c.x?c.x>0?n:-n:0,y:c.y?c.y>0?n:-n:0}:c;return(0,a.jsx)(i.E.div,{initial:{opacity:0,...u},animate:{opacity:1,x:0,y:0},exit:{opacity:0,...u},transition:{duration:r,delay:l,type:"spring",stiffness:300,damping:24},className:o,...d,children:s})}function L(e){let{title:s,value:t,icon:l,change:r,prefix:d,suffix:c,color:u,isCurrency:x,delay:m=0}=e,h="number"==typeof r&&r>0,f="number"==typeof r&&r<0;return(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m,duration:.3},children:(0,a.jsxs)(O,{className:"relative overflow-hidden",hoverEffect:"lift",children:[(0,a.jsx)("div",{className:(0,D.cn)("absolute top-0 right-0 h-24 w-24 rounded-full opacity-10 blur-2xl",u)}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("div",{className:(0,D.cn)("rounded-lg p-2.5","bg-".concat(u,"/10")),children:(0,a.jsx)("span",{className:(0,D.cn)("text-",u),children:l})}),void 0!==r&&(0,a.jsxs)("div",{className:(0,D.cn)("flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium",h&&"bg-green-500/10 text-green-500",f&&"bg-red-500/10 text-red-500",!h&&!f&&"bg-muted text-muted-foreground"),children:[h&&(0,a.jsx)(n.Z,{className:"h-3 w-3"}),f&&(0,a.jsx)(o.Z,{className:"h-3 w-3"}),Math.abs(r),"%"]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s}),(0,a.jsx)("p",{className:"mt-1 text-3xl font-bold text-foreground",children:x?(0,a.jsx)(I,{value:t,delay:m}):(0,a.jsxs)(a.Fragment,{children:[d,(0,a.jsx)(J,{value:t,delay:m}),c]})})]})]})]})})}function M(e){let{activity:s,index:t}=e;return(0,a.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-start gap-3 rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[(0,a.jsx)("div",{className:(0,D.cn)("mt-1 h-2 w-2 rounded-full",{COMPLETED:"bg-green-500",IN_PROGRESS:"bg-blue-500",PENDING:"bg-yellow-500",APPROVED:"bg-purple-500",REJECTED:"bg-red-500"}[s.status]||"bg-muted")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:s.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}function H(){var e;let{user:s}=(0,C.a)(),[t,n]=(0,l.useState)(null),[o,k]=(0,l.useState)(null),[P,T]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(async()=>{try{T(!0);let[e,s]=await Promise.all([(0,R.R1)("/api/health/stats"),(0,R.R1)("/api/dashboard")]);n(e),k(s)}catch(e){console.error("[Dashboard] Failed to load data:",e)}finally{T(!1)}})()},[]),P)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(F,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(B,{className:"h-80 w-full rounded-xl"})}),(0,a.jsx)(B,{className:"h-80 w-full rounded-xl"})]})]});let Z=null==o?void 0:o.cards;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(G,{direction:"down",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-foreground",children:["Welcome back, ",(null==s?void 0:s.name)||"Admin","! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Here's what's happening with your business today."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(S.w,{variant:"outline",asChild:!0,children:(0,a.jsx)(r.default,{href:"/reports",children:"View Reports"})}),(0,a.jsx)(S.w,{leftIcon:(0,a.jsx)(d.Z,{className:"h-4 w-4"}),asChild:!0,children:(0,a.jsx)(r.default,{href:"/jobs",children:"New Job"})})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,a.jsx)(L,{title:"Today's Revenue",value:(null==Z?void 0:Z.todaysRevenue)||0,icon:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-500"}),color:"green-500",isCurrency:!0,change:12,delay:0}),(0,a.jsx)(L,{title:"Pending Jobs",value:(null==Z?void 0:Z.pendingJobs)||0,icon:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-yellow-500"}),color:"yellow-500",delay:.1}),(0,a.jsx)(L,{title:"Active Jobs",value:(null==Z?void 0:Z.activeJobs)||0,icon:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-500"}),color:"blue-500",change:5,delay:.2}),(0,a.jsx)(L,{title:"New Customers",value:(null==Z?void 0:Z.newCustomers)||0,icon:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-purple-500"}),color:"purple-500",change:8,delay:.3}),(0,a.jsx)(L,{title:"Urgent Jobs",value:(null==Z?void 0:Z.urgentJobs)||0,icon:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-red-500"}),color:"red-500",delay:.4}),(0,a.jsx)(L,{title:"Campaigns",value:(null==Z?void 0:Z.campaignsRunning)||0,icon:(0,a.jsx)(f.Z,{className:"h-5 w-5 text-cyan-500"}),color:"cyan-500",delay:.5})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(i.E.div,{className:"lg:col-span-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsxs)(O,{className:"p-6",hoverEffect:"none",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:"Revenue Overview"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last 7 days performance"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-500",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),"+12.5%"]})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(j.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v.T,{data:(null==o?void 0:o.salesTrend)||[],children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),(0,a.jsx)(y.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),(0,a.jsx)(b.K,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{weekday:"short"})}),(0,a.jsx)(N.B,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),(0,a.jsx)(w.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},labelStyle:{color:"hsl(var(--foreground))"}}),(0,a.jsx)(E.uN,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#colorRevenue)"})]})})})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,a.jsxs)(O,{className:"p-6 h-full",hoverEffect:"none",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:"Recent Activity"}),(0,a.jsx)(r.default,{href:"/jobs",className:"text-xs text-primary hover:underline",children:"View all"})]}),(0,a.jsx)("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:(null==o?void 0:null===(e=o.recentActivities)||void 0===e?void 0:e.slice(0,6).map((e,s)=>(0,a.jsx)(M,{activity:e,index:s},e.id)))||(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent activity"})})]})})]}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,a.jsxs)(O,{className:"p-6",hoverEffect:"none",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground mb-6",children:"Jobs by Status"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[{label:"Pending",value:(null==t?void 0:t.jobsByStatus.PENDING)||0,color:"bg-yellow-500"},{label:"Quoted",value:(null==t?void 0:t.jobsByStatus.QUOTED)||0,color:"bg-blue-500"},{label:"Approved",value:(null==t?void 0:t.jobsByStatus.APPROVED)||0,color:"bg-purple-500"},{label:"In Progress",value:(null==t?void 0:t.jobsByStatus.IN_PROGRESS)||0,color:"bg-orange-500"},{label:"Completed",value:(null==t?void 0:t.jobsByStatus.COMPLETED)||0,color:"bg-green-500"},{label:"Rejected",value:(null==t?void 0:t.jobsByStatus.REJECTED)||0,color:"bg-red-500"}].map((e,s)=>(0,a.jsxs)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6+.05*s},className:"rounded-lg border border-border p-4 text-center hover:bg-muted/50 transition-colors",children:[(0,a.jsx)("div",{className:(0,D.cn)("mx-auto mb-2 h-2 w-12 rounded-full",e.color)}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground",children:(0,a.jsx)(J,{value:e.value,delay:.6+.05*s})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.label})]},e.label))})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,a.jsx)(O,{className:"p-6",hoverEffect:"none",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:"Quick Actions"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Jump straight into your most common workflows"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(S.w,{leftIcon:(0,a.jsx)(m.Z,{className:"h-4 w-4"}),asChild:!0,children:(0,a.jsx)(r.default,{href:"/customers",children:"Add Customer"})}),(0,a.jsx)(S.w,{variant:"outline",leftIcon:(0,a.jsx)(x.Z,{className:"h-4 w-4"}),asChild:!0,children:(0,a.jsx)(r.default,{href:"/jobs",children:"Create Job"})}),(0,a.jsx)(S.w,{variant:"outline",leftIcon:(0,a.jsx)(g.Z,{className:"h-4 w-4"}),asChild:!0,children:(0,a.jsx)(r.default,{href:"/devices",children:"Add Device"})})]})]})})})]})}}},function(e){e.O(0,[6340,1294,6161,5611,1293,1528,1744],function(){return e(e.s=89210)}),_N_E=e.O()}]);