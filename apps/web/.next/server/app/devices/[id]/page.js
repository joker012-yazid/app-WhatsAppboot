(()=>{var e={};e.id=684,e.ids=[684],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},92321:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),t(27662),t(77452),t(74773),t(87824);var a=t(93282),r=t(5736),i=t(93906),n=t.n(i),d=t(36880),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let o=["",{children:["devices",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,27662)),"/home/user/app-WhatsAppboot/apps/web/src/app/devices/[id]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,77452)),"/home/user/app-WhatsAppboot/apps/web/src/app/devices/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,74773)),"/home/user/app-WhatsAppboot/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/home/user/app-WhatsAppboot/apps/web/src/app/devices/[id]/page.tsx"],u="/devices/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/devices/[id]/page",pathname:"/devices/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},83149:(e,s,t)=>{Promise.resolve().then(t.bind(t,68872))},4006:(e,s,t)=>{Promise.resolve().then(t.bind(t,35472))},68872:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(73227),r=t(20649),i=t(41043),n=t(14455),d=t(29536),l=t(241),o=t(23677),c=t(73398),u=t(87674),p=t(11250),m=t(3254),x=t(72372),h=t(38609),b=t(5328);function v(){let{id:e}=(0,i.useParams)(),s=(0,i.useRouter)(),{user:t}=(0,h.a)(),v=(0,n.NL)(),g=(0,d.a)({queryKey:["device",e],queryFn:async()=>(0,u.R1)(`/api/devices/${e}`)}).data,[N,j]=(0,o.useState)(""),[f,y]=(0,o.useState)(""),[A,w]=(0,o.useState)(""),[E,C]=(0,o.useState)(""),[I,P]=(0,o.useState)(""),[D,M]=(0,o.useState)(null),_=(0,m.p)(),S=(0,x.N)(),q=(0,l.D)({mutationFn:async()=>(0,u.pE)(`/api/devices/${e}`,{deviceType:N,brand:f,model:A,serialNumber:E,notes:I}),onSuccess:async()=>{await v.invalidateQueries({queryKey:["device",e]}),await v.invalidateQueries({queryKey:["devices"]}),_.success("Device updated")},onError:e=>{let s=e?.message||"Failed to save";M(s),_.error(s)}}),R=(0,l.D)({mutationFn:async()=>(0,u.QW)(`/api/devices/${e}`),onSuccess:async()=>{await v.invalidateQueries({queryKey:["devices"]}),_.success("Device deleted"),s.replace("/devices")},onError:e=>{let s=e?.message||"Failed to delete";M(s),_.error(s)}});return a.jsx(c.Z,{children:(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-muted-foreground",children:"Device Detail"}),a.jsx("h1",{className:"text-2xl font-semibold",children:g?`${g.deviceType} ${g.brand||""} ${g.model||""}`:"Loading…"}),g?a.jsx("p",{className:"text-sm text-muted-foreground",children:g.customer.name}):null]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(p.z,{variant:"outline",asChild:!0,children:a.jsx(r.default,{href:"/devices",children:"Back"})}),(0,b.A)(t?.role,["ADMIN","MANAGER"])?a.jsx(p.z,{variant:"destructive",disabled:!!g?.jobs&&g.jobs.length>0||R.isPending,onClick:async()=>{await S({title:"Delete device",description:"Are you sure you want to delete this device? This action cannot be undone.",variant:"destructive",confirmText:"Delete"})&&R.mutate()},children:g?.jobs&&g.jobs.length>0?"Has jobs":"Delete"}):null]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"md:col-span-2 rounded-xl border bg-card p-4",children:[a.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Edit Device"}),(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])?null:a.jsx("p",{className:"mb-3 text-sm text-amber-700",children:"You have read-only access. Editing is restricted to Admin/Manager/Technician."}),g?.jobs&&g.jobs.length>0?(0,a.jsxs)("p",{className:"mb-3 text-sm text-amber-600",children:["This device has ",g.jobs.length," job(s). Deletion is disabled."]}):null,(0,a.jsxs)("form",{className:"space-y-3",onSubmit:e=>{e.preventDefault(),M(null),q.mutate()},children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",htmlFor:"type",children:"Device type"}),a.jsx("input",{id:"type",value:N,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",required:!0,disabled:!(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",htmlFor:"brand",children:"Brand"}),a.jsx("input",{id:"brand",value:f,onChange:e=>y(e.target.value),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",disabled:!(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",htmlFor:"model",children:"Model"}),a.jsx("input",{id:"model",value:A,onChange:e=>w(e.target.value),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",disabled:!(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",htmlFor:"serial",children:"Serial"}),a.jsx("input",{id:"serial",value:E,onChange:e=>C(e.target.value),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",disabled:!(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",htmlFor:"notes",children:"Notes"}),a.jsx("input",{id:"notes",value:I,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",disabled:!(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])})]}),D?a.jsx("p",{className:"text-sm text-red-500",children:D}):null,(0,b.A)(t?.role,["ADMIN","MANAGER","TECHNICIAN"])?a.jsx(p.z,{type:"submit",disabled:q.isPending,children:q.isPending?"Saving…":"Save changes"}):null]})]}),(0,a.jsxs)("aside",{className:"rounded-xl border bg-card p-4",children:[a.jsx("h3",{className:"mb-2 text-sm font-semibold text-muted-foreground",children:"Related Jobs"}),g?g.jobs&&0!==g.jobs.length?a.jsx("ul",{className:"space-y-2 text-sm",children:g.jobs.map(e=>a.jsx("li",{children:a.jsx(r.default,{href:`/jobs/${e.id}`,className:"underline hover:no-underline",children:e.title})},e.id))}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No jobs."}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading…"})]})]})]})})}},35472:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(73227),r=t(90708);function i({children:e}){return a.jsx(r.L,{children:e})}},11250:(e,s,t)=>{"use strict";t.d(s,{z:()=>o});var a=t(73227),r=t(23677),i=t(62007),n=t(31086),d=t(18755);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...n},o)=>{let c=r?i.g7:"button";return a.jsx(c,{className:(0,d.cn)(l({variant:s,size:t,className:e})),ref:o,...n})});o.displayName="Button"},5328:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(e,s)=>!!e&&s.includes(e)},27662:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(53189).createProxy)(String.raw`/home/user/app-WhatsAppboot/apps/web/src/app/devices/[id]/page.tsx#default`)},77452:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(53189).createProxy)(String.raw`/home/user/app-WhatsAppboot/apps/web/src/app/devices/layout.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[193,2,456,415,916,933,777,708],()=>t(92321));module.exports=a})();