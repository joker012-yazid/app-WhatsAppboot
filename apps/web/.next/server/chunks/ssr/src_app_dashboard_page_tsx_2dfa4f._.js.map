{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport AuthGuard from '@/components/auth-guard';\nimport { useAuth } from '@/lib/auth';\nimport { apiGet } from '@/lib/api';\nimport { Button } from '@/components/ui/button';\nimport { useToast } from '@/components/toast-provider';\n\ntype Stats = {\n  customers: number;\n  devices: number;\n  jobs: number;\n  jobsByStatus: {\n    PENDING: number;\n    QUOTED: number;\n    APPROVED: number;\n    IN_PROGRESS: number;\n    COMPLETED: number;\n    REJECTED: number;\n  };\n};\n\nexport default function DashboardPage() {\n  const { user } = useAuth();\n  const toast = useToast();\n  const [stats, setStats] = useState<Stats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        setLoading(true);\n        const data = await apiGet<Stats>('/api/health/stats');\n        setStats(data);\n      } catch (error: any) {\n        console.error('[Dashboard] Failed to load stats:', error);\n        const errorMessage = error?.message || 'Failed to load dashboard statistics';\n        toast.error(errorMessage);\n        setStats(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, [toast]);\n\n  return (\n    <AuthGuard>\n      <div className=\"space-y-6\">\n        <section className=\"rounded-xl border bg-card px-6 py-8 shadow-sm\">\n          <div className=\"mb-6\">\n            <h1 className=\"text-3xl font-bold\">Dashboard</h1>\n            <p className=\"text-muted-foreground mt-2\">\n              Welcome back, <span className=\"font-medium\">{user?.name || user?.email}</span>\n            </p>\n            <p className=\"text-sm text-muted-foreground mt-1\">Role: {user?.role}</p>\n          </div>\n\n          {loading ? (\n            <div className=\"text-center py-8 text-muted-foreground\">Loading statistics...</div>\n          ) : stats ? (\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\n              {/* Overview Cards */}\n              <div className=\"rounded-lg border p-6 bg-card\">\n                <p className=\"text-sm text-muted-foreground mb-2\">Total Customers</p>\n                <p className=\"text-3xl font-bold\">{stats.customers}</p>\n                <Button variant=\"ghost\" size=\"sm\" className=\"mt-4\" asChild>\n                  <Link href=\"/customers\">View All →</Link>\n                </Button>\n              </div>\n\n              <div className=\"rounded-lg border p-6 bg-card\">\n                <p className=\"text-sm text-muted-foreground mb-2\">Total Devices</p>\n                <p className=\"text-3xl font-bold\">{stats.devices}</p>\n                <Button variant=\"ghost\" size=\"sm\" className=\"mt-4\" asChild>\n                  <Link href=\"/devices\">View All →</Link>\n                </Button>\n              </div>\n\n              <div className=\"rounded-lg border p-6 bg-card\">\n                <p className=\"text-sm text-muted-foreground mb-2\">Total Jobs</p>\n                <p className=\"text-3xl font-bold\">{stats.jobs}</p>\n                <Button variant=\"ghost\" size=\"sm\" className=\"mt-4\" asChild>\n                  <Link href=\"/jobs\">View All →</Link>\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">Failed to load statistics</div>\n          )}\n        </section>\n\n        {stats && (\n          <section className=\"rounded-xl border bg-card px-6 py-8 shadow-sm\">\n            <h2 className=\"text-xl font-semibold mb-4\">Jobs by Status</h2>\n            <div className=\"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-6\">\n              <div className=\"rounded-lg border p-4 bg-yellow-50 dark:bg-yellow-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">Pending</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.PENDING}</p>\n              </div>\n              <div className=\"rounded-lg border p-4 bg-blue-50 dark:bg-blue-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">Quoted</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.QUOTED}</p>\n              </div>\n              <div className=\"rounded-lg border p-4 bg-purple-50 dark:bg-purple-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">Approved</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.APPROVED}</p>\n              </div>\n              <div className=\"rounded-lg border p-4 bg-orange-50 dark:bg-orange-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">In Progress</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.IN_PROGRESS}</p>\n              </div>\n              <div className=\"rounded-lg border p-4 bg-green-50 dark:bg-green-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">Completed</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.COMPLETED}</p>\n              </div>\n              <div className=\"rounded-lg border p-4 bg-red-50 dark:bg-red-950/20\">\n                <p className=\"text-xs text-muted-foreground mb-1\">Rejected</p>\n                <p className=\"text-2xl font-bold\">{stats.jobsByStatus.REJECTED}</p>\n              </div>\n            </div>\n          </section>\n        )}\n\n        <section className=\"rounded-xl border bg-card px-6 py-8 shadow-sm\">\n          <h2 className=\"text-xl font-semibold mb-4\">Quick Actions</h2>\n          <div className=\"flex flex-wrap gap-3\">\n            <Button asChild>\n              <Link href=\"/customers\">Add Customer</Link>\n            </Button>\n            <Button asChild variant=\"outline\">\n              <Link href=\"/jobs\">Create Job</Link>\n            </Button>\n            <Button asChild variant=\"outline\">\n              <Link href=\"/devices\">Add Device</Link>\n            </Button>\n          </div>\n        </section>\n      </div>\n    </AuthGuard>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}