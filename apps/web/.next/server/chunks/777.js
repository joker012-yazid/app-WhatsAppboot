exports.id=777,exports.ids=[777],exports.modules={52218:(e,t,r)=>{Promise.resolve().then(r.bind(r,33592))},69794:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,24424,23)),Promise.resolve().then(r.t.bind(r,37752,23)),Promise.resolve().then(r.t.bind(r,75275,23)),Promise.resolve().then(r.t.bind(r,29842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},33592:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>h});var a=r(73227),s=r(43448),n=r(14455),o=r(98910),i=r(23677),l=r(56086),c=r(38609),d=r(3254),u=r(72372);let h=({children:e})=>{let[t]=(0,i.useState)(()=>new s.S({defaultOptions:{queries:{staleTime:3e5,retry:1,refetchOnWindowFocus:!1}}}));return a.jsx(o.f,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!1,children:a.jsx(n.aH,{client:t,children:a.jsx(c.H,{children:a.jsx(d.V,{children:(0,a.jsxs)(u.W,{children:[e,a.jsx(l.x7,{position:"top-right",expand:!0,richColors:!0,closeButton:!0,theme:"system",toastOptions:{style:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",color:"hsl(var(--foreground))"},className:"sonner-toast"}})]})})})})})}},72372:(e,t,r)=>{"use strict";r.d(t,{N:()=>l,W:()=>i});var a=r(73227),s=r(23677),n=r(62812);let o=(0,s.createContext)(void 0);function i({children:e}){let[t,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!1);(0,s.useRef)(null);let c=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useCallback)(e=>new Promise(t=>{r({id:Date.now(),resolve:t,title:e.title??"Confirm action",description:e.description??"Are you sure you want to proceed? This action cannot be undone.",confirmText:e.confirmText??"Confirm",cancelText:e.cancelText??"Cancel",variant:e.variant??"default"})}),[]),h=(0,s.useMemo)(()=>({confirm:u}),[u]),m=(0,s.useCallback)(e=>{r(t=>(t&&t.resolve(e),null))},[]),f=i&&t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"presentation",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(!1)}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-xl border border-slate-800 bg-slate-950/90 p-5 shadow-2xl shadow-black/40 outline-none backdrop-blur",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-desc",tabIndex:-1,children:[a.jsx("h3",{id:"confirm-title",className:"mb-1 text-lg font-semibold text-slate-50",children:t.title}),a.jsx("p",{id:"confirm-desc",className:"mb-4 text-sm text-slate-300",children:t.description}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{ref:d,className:"rounded-md border border-slate-700 px-3 py-1.5 text-sm text-slate-200 transition hover:border-slate-500 hover:bg-slate-900",onClick:()=>m(!1),children:t.cancelText}),a.jsx("button",{ref:c,className:`rounded-md px-3 py-1.5 text-sm text-white transition ${"destructive"===t.variant?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-500"}`,onClick:()=>m(!0),children:t.confirmText})]})]})]}):null;return(0,a.jsxs)(o.Provider,{value:h,children:[e,i&&"undefined"!=typeof document&&f?(0,n.createPortal)(f,document.body):null]})}function l(){let e=(0,s.useContext)(o);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e.confirm}},3254:(e,t,r)=>{"use strict";r.d(t,{V:()=>l,p:()=>c});var a=r(73227),s=r(23677),n=r(62812);function o({message:e,variant:t="info",onClose:r,duration:s=2500}){return a.jsx("div",{className:`pointer-events-auto fixed bottom-4 right-4 z-50 max-w-sm rounded-lg border bg-slate-950/90 px-4 py-3 shadow-lg shadow-black/40 backdrop-blur ${"success"===t?"border-emerald-500/60 text-emerald-50":"error"===t?"border-red-500/60 text-red-50":"warning"===t?"border-amber-500/60 text-amber-50":"border-slate-700 text-slate-50"}`,role:"status","aria-live":"polite",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-sm",children:e}),r?a.jsx("button",{className:"ml-auto text-xs text-slate-300 opacity-80 transition hover:opacity-100",onClick:r,"aria-label":"Close",children:"x"}):null]})})}let i=(0,s.createContext)(void 0);function l({children:e}){let[t,r]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),d=(0,s.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),u=(0,s.useCallback)((e,t)=>{let a={id:Math.floor(Date.now()+1e3*Math.random()),message:e,variant:t?.variant??"info",duration:t?.duration??2500};r(e=>[...e,a])},[]),h=(0,s.useMemo)(()=>({show:u,success:(e,t)=>u(e,{variant:"success",duration:t}),error:(e,t)=>u(e,{variant:"error",duration:t}),info:(e,t)=>u(e,{variant:"info",duration:t}),warning:(e,t)=>u(e,{variant:"warning",duration:t})}),[u]),m=l&&t.length>0?a.jsx(a.Fragment,{children:t.map(e=>a.jsx(o,{message:e.message,variant:e.variant,duration:e.duration,onClose:()=>d(e.id)},e.id))}):null;return(0,a.jsxs)(i.Provider,{value:h,children:[e,l&&"undefined"!=typeof document&&m?(0,n.createPortal)(m,document.body):null]})}function c(){let e=(0,s.useContext)(i);if(!e)throw Error("useToast must be used within ToastProvider");return e}},87674:(e,t,r)=>{"use strict";r.d(t,{QW:()=>m,R1:()=>u,SC:()=>c,pE:()=>h,sg:()=>d,zi:()=>f});let a="http://localhost:4000",s=()=>null,n="accessToken",o="refreshToken",i=e=>e.startsWith("/api/auth/login")||e.startsWith("/api/auth/register")||e.startsWith("/api/auth/refresh"),l=!1;async function c(e,t={}){let{method:r="GET",body:d,headers:u,_retry:h}=t,m=`${a}${e}`,f=s(),b=f?.getItem(n)||null,p=f?.getItem(o)||null;try{let s=await fetch(m,{method:r,headers:{"Content-Type":"application/json",...u||{},...b&&!i?{Authorization:`Bearer ${b}`}:{}},body:d?JSON.stringify(d):void 0,credentials:"include"}),l=await s.text(),x={};if(l)try{x=JSON.parse(l)}catch(e){x={message:l}}if(!s.ok){let l=x?.message||`HTTP ${s.status}: ${s.statusText}`;if(console.error(`[API] Request failed: ${r} ${m} - ${l}`),401===s.status&&(console.warn("[API] Unauthorized â€“ will let auth layer handle redirect / logout"),!i(e)&&!h&&p)){try{let r=await fetch(`${a}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:p}),credentials:"include"});if(r.ok){let a=await r.json(),s=a?.accessToken,i=a?.refreshToken;return s&&f?.setItem(n,s),i&&f?.setItem(o,i),c(e,{...t,_retry:!0})}}catch(e){console.error("[API] Refresh token request failed",e)}f?.removeItem(n),f?.removeItem(o)}if(502===s.status||503===s.status||504===s.status){let e={code:"BACKEND_UNAVAILABLE",message:"Backend API server is not running. Please start the API server on port 4000."};try{globalThis.__toast?.error?.(e.message)}catch{}let t=Error(e.message);throw t.code=e.code,t}try{globalThis.__toast?.error?.(l)}catch{}throw Error(l)}return x}catch(t){if(t?.message?.includes("Failed to fetch")||t?.message?.includes("NetworkError")||t?.message?.includes("ECONNREFUSED")||t?.name==="TypeError"){let e={code:"BACKEND_UNAVAILABLE",message:"Backend API server is not running. Please start the API server on port 4000."};l||(console.error(`[API] Connection error: ${r} ${m}`,t),l=!0);try{globalThis.__toast?.error?.(e.message)}catch{}let a=Error(e.message);throw a.code=e.code,a}if(t instanceof Error&&t.message)throw t;let e=t?.message||`Failed to fetch: ${r} ${m}`;throw console.error(`[API] Request error: ${r} ${m}`,t),Error(e)}}let d=(e,t)=>c(e,{method:"POST",body:t}),u=e=>c(e,{method:"GET"}),h=(e,t)=>c(e,{method:"PUT",body:t}),m=e=>c(e,{method:"DELETE"});async function f(e,t){let r=await fetch(`${a}${e}`,{method:"POST",body:t,credentials:"include"}),s=await r.text(),n=s?JSON.parse(s):{};if(!r.ok)throw Error(n?.message||`HTTP ${r.status}`);return n}},38609:(e,t,r)=>{"use strict";r.d(t,{H:()=>d,a:()=>u});var a=r(73227),s=r(23677),n=r(87674);let o=(0,s.createContext)(void 0),i=()=>null,l="accessToken",c="refreshToken",d=({children:e})=>{let[t,r]=(0,s.useState)(null),[d,u]=(0,s.useState)("authenticating"),[h,m]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),p="authenticating"===d,x=(0,s.useCallback)(()=>{let e=i();e?.removeItem(l),e?.removeItem(c),b(null)},[]),g=(0,s.useCallback)(()=>{let e=i();return e?{access:e.getItem(l),refresh:e.getItem(c)}:{access:null,refresh:null}},[]),v=(0,s.useCallback)((e,t)=>{let r=i();r&&(e&&r.setItem(l,e),t&&r.setItem(c,t))},[]),w=(0,s.useCallback)(async()=>{let e=await (0,n.R1)("/api/auth/me");return r(e),u("authenticated"),m(null),e},[]),y=(0,s.useCallback)(async()=>{let{refresh:e}=g();if(!e)return!1;try{let t=await (0,n.sg)("/api/auth/refresh",{refreshToken:e});if(t?.accessToken)return v(t.accessToken,t.refreshToken??e),b(t.accessToken),!0;return!1}catch(e){return x(),!1}},[x,g,v]),k=(0,s.useCallback)(async(e,t)=>{m(null),u("authenticating");try{let a=await (0,n.sg)("/api/auth/login",{email:e,password:t});a?.accessToken&&(v(a.accessToken,a.refreshToken??null),b(a.accessToken));let s=a?.user?a.user:await w();r(s),u("authenticated")}catch(e){throw m(e?.message||"Login failed"),u("unauthenticated"),x(),e}},[w,v,x]),T=(0,s.useCallback)(async()=>{try{let{refresh:e}=g();e&&await (0,n.sg)("/api/auth/logout",{refreshToken:e})}catch{}finally{x(),r(null),u("unauthenticated")}},[x,g]);(0,s.useEffect)(()=>{let e=!1;return(async()=>{u("authenticating");try{let{access:t,refresh:a}=g(),s=!!t;!s&&a?s=await y():t&&b(t),s?(await w(),e||u("authenticated")):e||(u("unauthenticated"),r(null))}catch(t){if(!e){let e=t?.message||"";(e.includes("Backend API")||e.includes("BACKEND_UNAVAILABLE"))&&m(e),u("unauthenticated"),r(null),x()}}})(),()=>{e=!0}},[y,w,x,g]);let C=(0,s.useMemo)(()=>({user:t,loading:p,status:d,error:h,login:k,logout:T,accessToken:f}),[t,p,d,h,k,T,f]);return a.jsx(o.Provider,{value:C,children:e})},u=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},74773:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var a=r(99013);r(75556);let s=(0,r(53189).createProxy)(String.raw`/home/user/app-WhatsAppboot/apps/web/src/app/providers.tsx#Providers`),n={variable:"--font-sans"},o={variable:"--font-mono"},i={title:"WhatsApp Bot POS SuperApp",description:"Modern WhatsApp automation platform with repair shop management",keywords:["WhatsApp","Bot","POS","Repair Shop","CRM"],authors:[{name:"SuperApp Team"}],viewport:"width=device-width, initial-scale=1, maximum-scale=1",themeColor:[{media:"(prefers-color-scheme: light)",color:"#ffffff"},{media:"(prefers-color-scheme: dark)",color:"#0f172a"}]};function l({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{className:`${n.variable} ${o.variable} min-h-screen bg-background font-sans text-foreground antialiased`,children:a.jsx(s,{children:e})})})}},75556:()=>{}};