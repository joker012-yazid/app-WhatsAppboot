exports.id=420,exports.ids=[420],exports.modules={9275:(e,t,r)=>{Promise.resolve().then(r.bind(r,3592)),Promise.resolve().then(r.bind(r,4718)),Promise.resolve().then(r.bind(r,2554)),Promise.resolve().then(r.bind(r,7723))},1378:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},3592:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>u});var s=r(3227),a=r(3448),n=r(4455),o=r(8910),i=r(3677),l=r(8609),c=r(3254),d=r(2372);let u=({children:e})=>{let[t]=(0,i.useState)(()=>new a.S);return s.jsx(o.f,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:s.jsx(n.aH,{client:t,children:s.jsx(l.H,{children:s.jsx(c.V,{children:s.jsx(d.W,{children:e})})})})})}},2372:(e,t,r)=>{"use strict";r.d(t,{N:()=>l,W:()=>i});var s=r(3227),a=r(3677),n=r(2812);let o=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1);(0,a.useRef)(null);let c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useCallback)(e=>new Promise(t=>{r({id:Date.now(),resolve:t,title:e.title??"Confirm action",description:e.description??"Are you sure you want to proceed? This action cannot be undone.",confirmText:e.confirmText??"Confirm",cancelText:e.cancelText??"Cancel",variant:e.variant??"default"})}),[]),h=(0,a.useMemo)(()=>({confirm:u}),[u]),m=(0,a.useCallback)(e=>{r(t=>(t&&t.resolve(e),null))},[]),f=i&&t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"presentation",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(!1)}),(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-xl border border-slate-800 bg-slate-950/90 p-5 shadow-2xl shadow-black/40 outline-none backdrop-blur",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-desc",tabIndex:-1,children:[s.jsx("h3",{id:"confirm-title",className:"mb-1 text-lg font-semibold text-slate-50",children:t.title}),s.jsx("p",{id:"confirm-desc",className:"mb-4 text-sm text-slate-300",children:t.description}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{ref:d,className:"rounded-md border border-slate-700 px-3 py-1.5 text-sm text-slate-200 transition hover:border-slate-500 hover:bg-slate-900",onClick:()=>m(!1),children:t.cancelText}),s.jsx("button",{ref:c,className:`rounded-md px-3 py-1.5 text-sm text-white transition ${"destructive"===t.variant?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-500"}`,onClick:()=>m(!0),children:t.confirmText})]})]})]}):null;return(0,s.jsxs)(o.Provider,{value:h,children:[e,i&&"undefined"!=typeof document&&f?(0,n.createPortal)(f,document.body):null]})}function l(){let e=(0,a.useContext)(o);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e.confirm}},4718:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>c});var s=r(3227),a=r(3677),n=r(6489),o=r(4852),i=r(8910),l=r(1250);let c=()=>{let{theme:e,setTheme:t}=(0,i.F)(),[r,c]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{c(!0)},[]),!r)return s.jsx(l.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",disabled:!0,children:s.jsx(n.Z,{className:"h-5 w-5"})});let d="dark"===e;return s.jsx(l.z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>t(d?"light":"dark"),children:d?s.jsx(o.Z,{className:"h-5 w-5"}):s.jsx(n.Z,{className:"h-5 w-5"})})}},3254:(e,t,r)=>{"use strict";r.d(t,{V:()=>l,p:()=>c});var s=r(3227),a=r(3677),n=r(2812);function o({message:e,variant:t="info",onClose:r,duration:a=2500}){return s.jsx("div",{className:`pointer-events-auto fixed bottom-4 right-4 z-50 max-w-sm rounded-lg border bg-slate-950/90 px-4 py-3 shadow-lg shadow-black/40 backdrop-blur ${"success"===t?"border-emerald-500/60 text-emerald-50":"error"===t?"border-red-500/60 text-red-50":"warning"===t?"border-amber-500/60 text-amber-50":"border-slate-700 text-slate-50"}`,role:"status","aria-live":"polite",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-sm",children:e}),r?s.jsx("button",{className:"ml-auto text-xs text-slate-300 opacity-80 transition hover:opacity-100",onClick:r,"aria-label":"Close",children:"x"}):null]})})}let i=(0,a.createContext)(void 0);function l({children:e}){let[t,r]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),d=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),u=(0,a.useCallback)((e,t)=>{let s={id:Math.floor(Date.now()+1e3*Math.random()),message:e,variant:t?.variant??"info",duration:t?.duration??2500};r(e=>[...e,s])},[]),h=(0,a.useMemo)(()=>({show:u,success:(e,t)=>u(e,{variant:"success",duration:t}),error:(e,t)=>u(e,{variant:"error",duration:t}),info:(e,t)=>u(e,{variant:"info",duration:t}),warning:(e,t)=>u(e,{variant:"warning",duration:t})}),[u]),m=l&&t.length>0?s.jsx(s.Fragment,{children:t.map(e=>s.jsx(o,{message:e.message,variant:e.variant,duration:e.duration,onClose:()=>d(e.id)},e.id))}):null;return(0,s.jsxs)(i.Provider,{value:h,children:[e,l&&"undefined"!=typeof document&&m?(0,n.createPortal)(m,document.body):null]})}function c(){let e=(0,a.useContext)(i);if(!e)throw Error("useToast must be used within ToastProvider");return e}},2554:(e,t,r)=>{"use strict";r.d(t,{TopNav:()=>i});var s=r(3227),a=r(649),n=r(1043);let o=[{href:"/",label:"Home"},{href:"/dashboard",label:"Dashboard"},{href:"/customers",label:"Customers"},{href:"/devices",label:"Devices"},{href:"/jobs",label:"Jobs"},{href:"/campaigns",label:"Campaigns"},{href:"/reports",label:"Reports"},{href:"/settings",label:"Settings"},{href:"/docs/roadmap",label:"Roadmap"}];function i(){let e=(0,n.usePathname)();return s.jsx("nav",{className:"hidden items-center gap-3 text-sm sm:flex",children:o.map(t=>{let r=e===t.href||e?.startsWith(`${t.href}/`);return s.jsx(a.default,{href:t.href,className:`relative px-2 py-1 transition ${r?"text-sky-400 after:absolute after:inset-x-2 after:-bottom-[2px] after:h-[2px] after:rounded-full after:bg-sky-500":"text-muted-foreground hover:text-foreground"}`,children:t.label},t.href)})})}},1250:(e,t,r)=>{"use strict";r.d(t,{z:()=>c});var s=r(3227),a=r(3677),n=r(594),o=r(9186),i=r(8755);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...o},c)=>{let d=a?n.g7:"button";return s.jsx(d,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:c,...o})});c.displayName="Button"},7723:(e,t,r)=>{"use strict";r.d(t,{UserMenu:()=>l});var s=r(3227),a=r(649),n=r(8609),o=r(1250),i=r(3254);function l(){let{user:e,loading:t,logout:r}=(0,n.a)(),l=(0,i.p)();return t?s.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."}):e?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:e.email}),s.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{await r(),l.success("Logged out")}catch(e){l.error(e?.message||"Logout failed")}},children:"Logout"})]}):s.jsx(o.z,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(a.default,{href:"/login",children:"Login"})})}},7674:(e,t,r)=>{"use strict";r.d(t,{QW:()=>m,R1:()=>u,SC:()=>c,pE:()=>h,sg:()=>d,zi:()=>f});let s=process.env.NEXT_PUBLIC_API_BASE_URL||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",a=()=>null,n="accessToken",o="refreshToken",i=e=>e.startsWith("/api/auth/login")||e.startsWith("/api/auth/register")||e.startsWith("/api/auth/refresh"),l=!1;async function c(e,t={}){let{method:r="GET",body:d,headers:u,_retry:h}=t,m=`${s}${e}`,f=a(),p=f?.getItem(n)||null,x=f?.getItem(o)||null;try{let a=await fetch(m,{method:r,headers:{"Content-Type":"application/json",...u||{},...p&&!i?{Authorization:`Bearer ${p}`}:{}},body:d?JSON.stringify(d):void 0,credentials:"include"}),l=await a.text(),b={};if(l)try{b=JSON.parse(l)}catch(e){b={message:l}}if(!a.ok){let l=b?.message||`HTTP ${a.status}: ${a.statusText}`;if(console.error(`[API] Request failed: ${r} ${m} - ${l}`),401===a.status&&(console.warn("[API] Unauthorized â€“ will let auth layer handle redirect / logout"),!i(e)&&!h&&x)){try{let r=await fetch(`${s}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:x}),credentials:"include"});if(r.ok){let s=await r.json(),a=s?.accessToken,i=s?.refreshToken;return a&&f?.setItem(n,a),i&&f?.setItem(o,i),c(e,{...t,_retry:!0})}}catch(e){console.error("[API] Refresh token request failed",e)}f?.removeItem(n),f?.removeItem(o)}if(502===a.status||503===a.status||504===a.status){let e={code:"BACKEND_UNAVAILABLE",message:"Backend API server is not running. Please start the API server on port 4000."};try{globalThis.__toast?.error?.(e.message)}catch{}let t=Error(e.message);throw t.code=e.code,t}try{globalThis.__toast?.error?.(l)}catch{}throw Error(l)}return b}catch(t){if(t?.message?.includes("Failed to fetch")||t?.message?.includes("NetworkError")||t?.message?.includes("ECONNREFUSED")||t?.name==="TypeError"){let e={code:"BACKEND_UNAVAILABLE",message:"Backend API server is not running. Please start the API server on port 4000."};l||(console.error(`[API] Connection error: ${r} ${m}`,t),l=!0);try{globalThis.__toast?.error?.(e.message)}catch{}let s=Error(e.message);throw s.code=e.code,s}if(t instanceof Error&&t.message)throw t;let e=t?.message||`Failed to fetch: ${r} ${m}`;throw console.error(`[API] Request error: ${r} ${m}`,t),Error(e)}}let d=(e,t)=>c(e,{method:"POST",body:t}),u=e=>c(e,{method:"GET"}),h=(e,t)=>c(e,{method:"PUT",body:t}),m=e=>c(e,{method:"DELETE"});async function f(e,t){let r=await fetch(`${s}${e}`,{method:"POST",body:t,credentials:"include"}),a=await r.text(),n=a?JSON.parse(a):{};if(!r.ok)throw Error(n?.message||`HTTP ${r.status}`);return n}},8609:(e,t,r)=>{"use strict";r.d(t,{H:()=>d,a:()=>u});var s=r(3227),a=r(3677),n=r(7674);let o=(0,a.createContext)(void 0),i=()=>null,l="accessToken",c="refreshToken",d=({children:e})=>{let[t,r]=(0,a.useState)(null),[d,u]=(0,a.useState)("authenticating"),[h,m]=(0,a.useState)(null),[f,p]=(0,a.useState)(null),x="authenticating"===d,b=(0,a.useCallback)(()=>{let e=i();e?.removeItem(l),e?.removeItem(c),p(null)},[]),g=(0,a.useCallback)(()=>{let e=i();return e?{access:e.getItem(l),refresh:e.getItem(c)}:{access:null,refresh:null}},[]),v=(0,a.useCallback)((e,t)=>{let r=i();r&&(e&&r.setItem(l,e),t&&r.setItem(c,t))},[]),y=(0,a.useCallback)(async()=>{let e=await (0,n.R1)("/api/auth/me");return r(e),u("authenticated"),m(null),e},[]),w=(0,a.useCallback)(async()=>{let{refresh:e}=g();try{let t=await (0,n.sg)("/api/auth/refresh",e?{refreshToken:e}:{});if(t?.accessToken)return v(t.accessToken,t.refreshToken??e??null),p(t.accessToken),!0;return!1}catch(e){return b(),!1}},[b,g,v]),j=(0,a.useCallback)(async(e,t)=>{m(null),u("authenticating");try{let s=await (0,n.sg)("/api/auth/login",{email:e,password:t});s?.accessToken&&(v(s.accessToken,s.refreshToken??null),p(s.accessToken));let a=s?.user?s.user:await y();r(a),u("authenticated")}catch(e){throw m(e?.message||"Login failed"),u("unauthenticated"),b(),e}},[y,v,b]),k=(0,a.useCallback)(async()=>{try{let{refresh:e}=g();await (0,n.sg)("/api/auth/logout",e?{refreshToken:e}:{})}finally{b(),r(null),u("unauthenticated")}},[b,g]);(0,a.useEffect)(()=>{let e=!1;return(async()=>{u("authenticating");try{let{access:t}=g(),s=!!t;s?p(t||null):s=await w(),s?(await y(),e||u("authenticated")):e||(u("unauthenticated"),r(null))}catch(t){e||(m(t?.message||"Session expired. Please login again."),u("unauthenticated"),r(null),b())}})(),()=>{e=!0}},[w,y,b,g]);let T=(0,a.useMemo)(()=>({user:t,loading:x,status:d,error:h,login:j,logout:k,accessToken:f}),[t,x,d,h,j,k,f]);return s.jsx(o.Provider,{value:T,children:e})},u=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8755:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});let s=(...e)=>e.filter(Boolean).join(" ")},8322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,metadata:()=>u});var s=r(9013),a=r(4749),n=r.n(a);r(5556);var o=r(3189);let i=(0,o.createProxy)(String.raw`C:\Users\Jokeryazid\Documents\My projek\new whatsappbot\app-WhatsAppboot\apps\web\src\components\theme-toggle.tsx#ThemeToggle`),l=(0,o.createProxy)(String.raw`C:\Users\Jokeryazid\Documents\My projek\new whatsappbot\app-WhatsAppboot\apps\web\src\app\providers.tsx#Providers`),c=(0,o.createProxy)(String.raw`C:\Users\Jokeryazid\Documents\My projek\new whatsappbot\app-WhatsAppboot\apps\web\src\components\user-menu.tsx#UserMenu`),d=(0,o.createProxy)(String.raw`C:\Users\Jokeryazid\Documents\My projek\new whatsappbot\app-WhatsAppboot\apps\web\src\components\top-nav.tsx#TopNav`),u={title:"WhatsApp Bot POS SuperApp",description:"Phase 1 foundation stack for the WhatsApp automation platform"};function h({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:`${n().variable} min-h-screen bg-gradient-to-b from-slate-950 via-slate-950 to-slate-900 font-sans text-foreground`,children:s.jsx(l,{children:(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 border-b border-slate-800/80 bg-slate-950/80 backdrop-blur",children:(0,s.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Phase 1"}),s.jsx("p",{className:"text-lg font-semibold text-slate-50",children:"WhatsApp Bot POS SuperApp"})]}),s.jsx(d,{})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx(i,{}),s.jsx(c,{})]})]})}),s.jsx("main",{className:"mx-auto w-full max-w-6xl flex-1 px-6 py-10",children:e})]})})})})}},5556:()=>{}};